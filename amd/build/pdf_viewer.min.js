function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet),privateSet.add(obj)}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap),privateMap.set(obj,value)}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(receiver,classConstructor,method){return function(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}(receiver,classConstructor),method}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}define("mod_pdfannotator/pdf_viewer",[],(()=>(()=>{var __webpack_modules__=[,(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultXfaLayerFactory=exports.DefaultTextLayerFactory=exports.DefaultStructTreeLayerFactory=exports.DefaultAnnotationLayerFactory=void 0;var _annotation_layer_builder=__w_pdfjs_require__(2),_l10n_utils=__w_pdfjs_require__(4),_pdf_link_service=__w_pdfjs_require__(5),_struct_tree_layer_builder=__w_pdfjs_require__(7),_text_layer_builder=__w_pdfjs_require__(8),_xfa_layer_builder=__w_pdfjs_require__(9);exports.DefaultAnnotationLayerFactory=class{createAnnotationLayerBuilder(pageDiv,pdfPage){let annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,imageResourcesPath=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",renderForms=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l10n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_l10n_utils.NullL10n,enableScripting=arguments.length>6&&void 0!==arguments[6]&&arguments[6],hasJSActionsPromise=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,mouseState=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,fieldObjectsPromise=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,annotationCanvasMap=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return new _annotation_layer_builder.AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,imageResourcesPath:imageResourcesPath,renderForms:renderForms,linkService:new _pdf_link_service.SimpleLinkService,l10n:l10n,annotationStorage:annotationStorage,enableScripting:enableScripting,hasJSActionsPromise:hasJSActionsPromise,fieldObjectsPromise:fieldObjectsPromise,mouseState:mouseState,annotationCanvasMap:annotationCanvasMap})}};exports.DefaultStructTreeLayerFactory=class{createStructTreeLayerBuilder(pdfPage){return new _struct_tree_layer_builder.StructTreeLayerBuilder({pdfPage:pdfPage})}};exports.DefaultTextLayerFactory=class{createTextLayerBuilder(textLayerDiv,pageIndex,viewport){let enhanceTextSelection=arguments.length>3&&void 0!==arguments[3]&&arguments[3],eventBus=arguments.length>4?arguments[4]:void 0,highlighter=arguments.length>5?arguments[5]:void 0;return new _text_layer_builder.TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport,enhanceTextSelection:enhanceTextSelection,eventBus:eventBus,highlighter:highlighter})}};exports.DefaultXfaLayerFactory=class{createXfaLayerBuilder(pageDiv,pdfPage){let annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,xfaHtml=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new _xfa_layer_builder.XfaLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage,linkService:new _pdf_link_service.SimpleLinkService,xfaHtml:xfaHtml})}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnotationLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_l10n_utils=__w_pdfjs_require__(4);exports.AnnotationLayerBuilder=class{constructor(_ref){let{pageDiv:pageDiv,pdfPage:pdfPage,linkService:linkService,downloadManager:downloadManager,annotationStorage:annotationStorage=null,imageResourcesPath:imageResourcesPath="",renderForms:renderForms=!0,l10n:l10n=_l10n_utils.NullL10n,enableScripting:enableScripting=!1,hasJSActionsPromise:hasJSActionsPromise=null,fieldObjectsPromise:fieldObjectsPromise=null,mouseState:mouseState=null,annotationCanvasMap:annotationCanvasMap=null}=_ref;this.pageDiv=pageDiv,this.pdfPage=pdfPage,this.linkService=linkService,this.downloadManager=downloadManager,this.imageResourcesPath=imageResourcesPath,this.renderForms=renderForms,this.l10n=l10n,this.annotationStorage=annotationStorage,this.enableScripting=enableScripting,this._hasJSActionsPromise=hasJSActionsPromise,this._fieldObjectsPromise=fieldObjectsPromise,this._mouseState=mouseState,this._annotationCanvasMap=annotationCanvasMap,this.div=null,this._cancelled=!1}async render(viewport){let intent=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";const[annotations,hasJSActions=!1,fieldObjects=null]=await Promise.all([this.pdfPage.getAnnotations({intent:intent}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||0===annotations.length)return;const parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,annotations:annotations,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:hasJSActions,fieldObjects:fieldObjects,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap};this.div?_pdfjsLib.AnnotationLayer.update(parameters):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),parameters.div=this.div,_pdfjsLib.AnnotationLayer.render(parameters),this.l10n.translate(this.div))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},module=>{let pdfjsLib;pdfjsLib="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:require("../build/pdf.js.js"),module.exports=pdfjsLib},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NullL10n=void 0,exports.fixupLangCode=function(langCode){return PARTIAL_LANG_CODES[null==langCode?void 0:langCode.toLowerCase()]||langCode},exports.getL10nFallback=getL10nFallback;const DEFAULT_L10N_STRINGS={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading…",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function getL10nFallback(key,args){switch(key){case"find_match_count":key="find_match_count[".concat(1===args.total?"one":"other","]");break;case"find_match_count_limit":key="find_match_count_limit[".concat(1===args.limit?"one":"other","]")}return DEFAULT_L10N_STRINGS[key]||""}const PARTIAL_LANG_CODES={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};const NullL10n={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",async get(key){let args=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(text,args){return args?text.replace(/\{\{\s*(\w+)\s*\}\}/g,((all,name)=>name in args?args[name]:"{{"+name+"}}")):text}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:getL10nFallback(key,args),args)},async translate(element){}};exports.NullL10n=NullL10n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleLinkService=exports.PDFLinkService=exports.LinkTarget=void 0;var _ui_utils=__w_pdfjs_require__(6);const LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function addLinkAttributes(link){let{url:url,target:target,rel:rel,enabled:enabled=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!url||"string"!=typeof url)throw new Error('A valid "url" parameter must provided.');const urlNullRemoved=(0,_ui_utils.removeNullCharacters)(url);enabled?link.href=link.title=urlNullRemoved:(link.href="",link.title="Disabled: ".concat(urlNullRemoved),link.onclick=()=>!1);let targetStr="";switch(target){case LinkTarget.NONE:break;case LinkTarget.SELF:targetStr="_self";break;case LinkTarget.BLANK:targetStr="_blank";break;case LinkTarget.PARENT:targetStr="_parent";break;case LinkTarget.TOP:targetStr="_top"}link.target=targetStr,link.rel="string"==typeof rel?rel:"noopener noreferrer nofollow"}exports.LinkTarget=LinkTarget;var _pagesRefCache=new WeakMap,_goToDestinationHelper=new WeakSet;class PDFLinkService{constructor(){let{eventBus:eventBus,externalLinkTarget:externalLinkTarget=null,externalLinkRel:externalLinkRel=null,ignoreDestinationZoom:ignoreDestinationZoom=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classPrivateMethodInitSpec(this,_goToDestinationHelper),_classPrivateFieldInitSpec(this,_pagesRefCache,{writable:!0,value:new Map}),this.eventBus=eventBus,this.externalLinkTarget=externalLinkTarget,this.externalLinkRel=externalLinkRel,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=ignoreDestinationZoom,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(pdfDocument){let baseUrl=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,_classPrivateFieldGet(this,_pagesRefCache).clear()}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setHistory(pdfHistory){this.pdfHistory=pdfHistory}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(value){this.pdfViewer.currentPageNumber=value}get rotation(){return this.pdfViewer.pagesRotation}set rotation(value){this.pdfViewer.pagesRotation=value}async goToDestination(dest){if(!this.pdfDocument)return;let namedDest,explicitDest;"string"==typeof dest?(namedDest=dest,explicitDest=await this.pdfDocument.getDestination(dest)):(namedDest=null,explicitDest=await dest),Array.isArray(explicitDest)?_classPrivateMethodGet(this,_goToDestinationHelper,_goToDestinationHelper2).call(this,dest,namedDest,explicitDest):console.error('PDFLinkService.goToDestination: "'.concat(explicitDest,'" is not ')+'a valid destination array, for dest="'.concat(dest,'".'))}goToPage(val){if(!this.pdfDocument)return;const pageNumber="string"==typeof val&&this.pdfViewer.pageLabelToPageNumber(val)||0|val;Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(pageNumber)),this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber})):console.error('PDFLinkService.goToPage: "'.concat(val,'" is not a valid page.'))}addLinkAttributes(link,url){addLinkAttributes(link,{url:url,target:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?LinkTarget.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(dest){if("string"==typeof dest){if(dest.length>0)return this.getAnchorUrl("#"+escape(dest))}else if(Array.isArray(dest)){const str=JSON.stringify(dest);if(str.length>0)return this.getAnchorUrl("#"+escape(str))}return this.getAnchorUrl("")}getAnchorUrl(anchor){return(this.baseUrl||"")+anchor}setHash(hash){if(!this.pdfDocument)return;let pageNumber,dest;if(hash.includes("=")){const params=(0,_ui_utils.parseQueryString)(hash);if(params.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:params.get("search").replace(/"/g,""),phraseSearch:"true"===params.get("phrase")}),params.has("page")&&(pageNumber=0|params.get("page")||1),params.has("zoom")){const zoomArgs=params.get("zoom").split(","),zoomArg=zoomArgs[0],zoomArgNumber=parseFloat(zoomArg);zoomArg.includes("Fit")?"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},zoomArgs.length>1?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error('PDFLinkService.setHash: "'.concat(zoomArg,'" is not a valid zoom value.')):dest=[null,{name:"XYZ"},zoomArgs.length>1?0|zoomArgs[1]:null,zoomArgs.length>2?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}dest?this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:!0}):pageNumber&&(this.page=pageNumber),params.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:params.get("pagemode")}),params.has("nameddest")&&this.goToDestination(params.get("nameddest"))}else{dest=unescape(hash);try{dest=JSON.parse(dest),Array.isArray(dest)||(dest=dest.toString())}catch(ex){}if("string"==typeof dest||_classStaticPrivateMethodGet(PDFLinkService,PDFLinkService,_isValidExplicitDestination).call(PDFLinkService,dest))return void this.goToDestination(dest);console.error('PDFLinkService.setHash: "'.concat(unescape(hash),'" is not a valid destination.'))}}executeNamedAction(action){var _this$pdfHistory,_this$pdfHistory2;switch(action){case"GoBack":null===(_this$pdfHistory=this.pdfHistory)||void 0===_this$pdfHistory||_this$pdfHistory.back();break;case"GoForward":null===(_this$pdfHistory2=this.pdfHistory)||void 0===_this$pdfHistory2||_this$pdfHistory2.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:action})}cachePageRef(pageNum,pageRef){if(!pageRef)return;const refStr=0===pageRef.gen?"".concat(pageRef.num,"R"):"".concat(pageRef.num,"R").concat(pageRef.gen);_classPrivateFieldGet(this,_pagesRefCache).set(refStr,pageNum)}_cachedPageNumber(pageRef){if(!pageRef)return null;const refStr=0===pageRef.gen?"".concat(pageRef.num,"R"):"".concat(pageRef.num,"R").concat(pageRef.gen);return _classPrivateFieldGet(this,_pagesRefCache).get(refStr)||null}isPageVisible(pageNumber){return this.pdfViewer.isPageVisible(pageNumber)}isPageCached(pageNumber){return this.pdfViewer.isPageCached(pageNumber)}}function _goToDestinationHelper2(rawDest){let namedDest=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,explicitDest=arguments.length>2?arguments[2]:void 0;const destRef=explicitDest[0];let pageNumber;if("object"==typeof destRef&&null!==destRef){if(pageNumber=this._cachedPageNumber(destRef),!pageNumber)return void this.pdfDocument.getPageIndex(destRef).then((pageIndex=>{this.cachePageRef(pageIndex+1,destRef),_classPrivateMethodGet(this,_goToDestinationHelper,_goToDestinationHelper2).call(this,rawDest,namedDest,explicitDest)})).catch((()=>{console.error('PDFLinkService.#goToDestinationHelper: "'.concat(destRef,'" is not ')+'a valid page reference, for dest="'.concat(rawDest,'".'))}))}else{if(!Number.isInteger(destRef))return void console.error('PDFLinkService.#goToDestinationHelper: "'.concat(destRef,'" is not ')+'a valid destination reference, for dest="'.concat(rawDest,'".'));pageNumber=destRef+1}!pageNumber||pageNumber<1||pageNumber>this.pagesCount?console.error('PDFLinkService.#goToDestinationHelper: "'.concat(pageNumber,'" is not ')+'a valid page number, for dest="'.concat(rawDest,'".')):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:namedDest,explicitDest:explicitDest,pageNumber:pageNumber})),this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber,destArray:explicitDest,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function _isValidExplicitDestination(dest){if(!Array.isArray(dest))return!1;const destLength=dest.length;if(destLength<2)return!1;const page=dest[0];if(!("object"==typeof page&&Number.isInteger(page.num)&&Number.isInteger(page.gen)||Number.isInteger(page)&&page>=0))return!1;const zoom=dest[1];if("object"!=typeof zoom||"string"!=typeof zoom.name)return!1;let allowNull=!0;switch(zoom.name){case"XYZ":if(5!==destLength)return!1;break;case"Fit":case"FitB":return 2===destLength;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==destLength)return!1;break;case"FitR":if(6!==destLength)return!1;allowNull=!1;break;default:return!1}for(let i=2;i<destLength;i++){const param=dest[i];if(!("number"==typeof param||allowNull&&null===param))return!1}return!0}exports.PDFLinkService=PDFLinkService;exports.SimpleLinkService=class{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(value){}get rotation(){return 0}set rotation(value){}async goToDestination(dest){}goToPage(val){}addLinkAttributes(link,url){addLinkAttributes(link,{url:url,enabled:this.externalLinkEnabled})}getDestinationHash(dest){return"#"}getAnchorUrl(hash){return"#"}setHash(hash){}executeNamedAction(action){}cachePageRef(pageNum,pageRef){}isPageVisible(pageNumber){return!0}isPageCached(pageNumber){return!0}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.animationStarted=exports.VERTICAL_PADDING=exports.UNKNOWN_SCALE=exports.TextLayerMode=exports.SpreadMode=exports.SidebarView=exports.ScrollMode=exports.SCROLLBAR_PADDING=exports.RenderingStates=exports.RendererType=exports.ProgressBar=exports.PresentationModeState=exports.OutputScale=exports.MIN_SCALE=exports.MAX_SCALE=exports.MAX_AUTO_SCALE=exports.DEFAULT_SCALE_VALUE=exports.DEFAULT_SCALE_DELTA=exports.DEFAULT_SCALE=exports.AutoPrintRegExp=void 0,exports.apiPageLayoutToViewerModes=function(layout){let scrollMode=ScrollMode.VERTICAL,spreadMode=SpreadMode.NONE;switch(layout){case"SinglePage":scrollMode=ScrollMode.PAGE;break;case"OneColumn":break;case"TwoPageLeft":scrollMode=ScrollMode.PAGE;case"TwoColumnLeft":spreadMode=SpreadMode.ODD;break;case"TwoPageRight":scrollMode=ScrollMode.PAGE;case"TwoColumnRight":spreadMode=SpreadMode.EVEN}return{scrollMode:scrollMode,spreadMode:spreadMode}},exports.apiPageModeToSidebarView=function(mode){switch(mode){case"UseNone":return SidebarView.NONE;case"UseThumbs":return SidebarView.THUMBS;case"UseOutlines":return SidebarView.OUTLINE;case"UseAttachments":return SidebarView.ATTACHMENTS;case"UseOC":return SidebarView.LAYERS}return SidebarView.NONE},exports.approximateFraction=function(x){if(Math.floor(x)===x)return[x,1];const xinv=1/x;if(xinv>8)return[1,8];if(Math.floor(xinv)===xinv)return[1,xinv];const x_=x>1?xinv:x;let result,a=0,b=1,c=1,d=1;for(;;){const p=a+c,q=b+d;if(q>8)break;x_<=p/q?(c=p,d=q):(a=p,b=q)}result=x_-a/b<c/d-x_?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c];return result},exports.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements,exports.binarySearchFirstItem=binarySearchFirstItem,exports.getActiveOrFocusedElement=function(){let curRoot=document,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus");for(;null!==(_curActiveOrFocused=curActiveOrFocused)&&void 0!==_curActiveOrFocused&&_curActiveOrFocused.shadowRoot;){var _curActiveOrFocused;curRoot=curActiveOrFocused.shadowRoot,curActiveOrFocused=curRoot.activeElement||curRoot.querySelector(":focus")}return curActiveOrFocused},exports.getPageSizeInches=function(_ref2){let{view:view,userUnit:userUnit,rotate:rotate}=_ref2;const[x1,y1,x2,y2]=view,changeOrientation=rotate%180!=0,width=(x2-x1)/72*userUnit,height=(y2-y1)/72*userUnit;return{width:changeOrientation?height:width,height:changeOrientation?width:height}},exports.getVisibleElements=function(_ref3){let{scrollEl:scrollEl,views:views,sortByVisibility:sortByVisibility=!1,horizontal:horizontal=!1,rtl:rtl=!1}=_ref3;const top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight,left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;const visible=[],ids=new Set,numViews=views.length;let firstVisibleElementInd=binarySearchFirstItem(views,horizontal?function(view){const element=view.div,elementLeft=element.offsetLeft+element.clientLeft,elementRight=elementLeft+element.clientWidth;return rtl?elementLeft<right:elementRight>left}:function(view){const element=view.div;return element.offsetTop+element.clientTop+element.clientHeight>top});firstVisibleElementInd>0&&firstVisibleElementInd<numViews&&!horizontal&&(firstVisibleElementInd=backtrackBeforeAllVisibleElements(firstVisibleElementInd,views,top));let lastEdge=horizontal?right:-1;for(let i=firstVisibleElementInd;i<numViews;i++){const view=views[i],element=view.div,currentWidth=element.offsetLeft+element.clientLeft,currentHeight=element.offsetTop+element.clientTop,viewWidth=element.clientWidth,viewHeight=element.clientHeight,viewRight=currentWidth+viewWidth,viewBottom=currentHeight+viewHeight;if(-1===lastEdge)viewBottom>=bottom&&(lastEdge=viewBottom);else if((horizontal?currentWidth:currentHeight)>lastEdge)break;if(viewBottom<=top||currentHeight>=bottom||viewRight<=left||currentWidth>=right)continue;const hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,viewBottom-bottom),hiddenWidth=Math.max(0,left-currentWidth)+Math.max(0,viewRight-right),fractionWidth=(viewWidth-hiddenWidth)/viewWidth,percent=(viewHeight-hiddenHeight)/viewHeight*fractionWidth*100|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percent,widthPercent:100*fractionWidth|0}),ids.add(view.id)}const first=visible[0],last=visible[visible.length-1];sortByVisibility&&visible.sort((function(a,b){const pc=a.percent-b.percent;return Math.abs(pc)>.001?-pc:a.id-b.id}));return{first:first,last:last,views:visible,ids:ids}},exports.isPortraitOrientation=function(size){return size.width<=size.height},exports.isValidRotation=function(angle){return Number.isInteger(angle)&&angle%90==0},exports.isValidScrollMode=function(mode){return Number.isInteger(mode)&&Object.values(ScrollMode).includes(mode)&&mode!==ScrollMode.UNKNOWN},exports.isValidSpreadMode=function(mode){return Number.isInteger(mode)&&Object.values(SpreadMode).includes(mode)&&mode!==SpreadMode.UNKNOWN},exports.noContextMenuHandler=function(evt){evt.preventDefault()},exports.normalizeWheelEventDelta=function(evt){let delta=normalizeWheelEventDirection(evt);0===evt.deltaMode?delta/=900:1===evt.deltaMode&&(delta/=30);return delta},exports.normalizeWheelEventDirection=normalizeWheelEventDirection,exports.parseQueryString=function(query){const params=new Map;for(const[key,value]of new URLSearchParams(query))params.set(key.toLowerCase(),value);return params},exports.removeNullCharacters=function(str){let replaceInvisible=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof str)return console.error("The argument must be a string."),str;replaceInvisible&&(str=str.replace(InvisibleCharactersRegExp," "));return str.replace(NullCharactersRegExp,"")},exports.roundToDivide=function(x,div){const r=x%div;return 0===r?x:Math.round(x-r+div)},exports.scrollIntoView=function(element,spot){let scrollMatches=arguments.length>2&&void 0!==arguments[2]&&arguments[2],parent=element.offsetParent;if(!parent)return void console.error("offsetParent is not set -- cannot scroll");let offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;for(;parent.clientHeight===parent.scrollHeight&&parent.clientWidth===parent.scrollWidth||scrollMatches&&(parent.classList.contains("markedContent")||"hidden"===getComputedStyle(parent).overflow);)if(offsetY+=parent.offsetTop,offsetX+=parent.offsetLeft,parent=parent.offsetParent,!parent)return;spot&&(void 0!==spot.top&&(offsetY+=spot.top),void 0!==spot.left&&(offsetX+=spot.left,parent.scrollLeft=offsetX));parent.scrollTop=offsetY},exports.watchScroll=function(viewAreaElement,callback){const debounceScroll=function(evt){rAF||(rAF=window.requestAnimationFrame((function(){rAF=null;const currentX=viewAreaElement.scrollLeft,lastX=state.lastX;currentX!==lastX&&(state.right=currentX>lastX),state.lastX=currentX;const currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=currentY>lastY),state.lastY=currentY,callback(state)})))},state={right:!0,down:!0,lastX:viewAreaElement.scrollLeft,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll};let rAF=null;return viewAreaElement.addEventListener("scroll",debounceScroll,!0),state};exports.DEFAULT_SCALE_VALUE="auto";exports.DEFAULT_SCALE=1;exports.DEFAULT_SCALE_DELTA=1.1;exports.MIN_SCALE=.1;exports.MAX_SCALE=10;exports.UNKNOWN_SCALE=0;exports.MAX_AUTO_SCALE=1.25;exports.SCROLLBAR_PADDING=40;exports.VERTICAL_PADDING=5;exports.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};exports.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const SidebarView={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};exports.SidebarView=SidebarView;exports.RendererType={CANVAS:"canvas",SVG:"svg"};exports.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};exports.ScrollMode=ScrollMode;const SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};exports.SpreadMode=SpreadMode;exports.AutoPrintRegExp=/\bprint\s*\(/;exports.OutputScale=class{constructor(){const pixelRatio=window.devicePixelRatio||1;this.sx=pixelRatio,this.sy=pixelRatio}get scaled(){return 1!==this.sx||1!==this.sy}};const NullCharactersRegExp=/\x00/g,InvisibleCharactersRegExp=/[\x01-\x1F]/g;function binarySearchFirstItem(items,condition){let start=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,minIndex=start,maxIndex=items.length-1;if(maxIndex<0||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;minIndex<maxIndex;){const currentIndex=minIndex+maxIndex>>1;condition(items[currentIndex])?maxIndex=currentIndex:minIndex=currentIndex+1}return minIndex}function backtrackBeforeAllVisibleElements(index,views,top){if(index<2)return index;let elt=views[index].div,pageTop=elt.offsetTop+elt.clientTop;pageTop>=top&&(elt=views[index-1].div,pageTop=elt.offsetTop+elt.clientTop);for(let i=index-2;i>=0&&(elt=views[i].div,!(elt.offsetTop+elt.clientTop+elt.clientHeight<=pageTop));--i)index=i;return index}function normalizeWheelEventDirection(evt){let delta=Math.hypot(evt.deltaX,evt.deltaY);const angle=Math.atan2(evt.deltaY,evt.deltaX);return-.25*Math.PI<angle&&angle<.75*Math.PI&&(delta=-delta),delta}const animationStarted=new Promise((function(resolve){window.requestAnimationFrame(resolve)}));exports.animationStarted=animationStarted;exports.ProgressBar=class{constructor(id){let{height:height,width:width,units:units}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.visible=!0,this.div=document.querySelector(id+" .progress"),this.bar=this.div.parentNode,this.height=height||100,this.width=width||100,this.units=units||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");const progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units}get percent(){return this._percent}set percent(val){var v,min,max;this._indeterminate=isNaN(val),this._percent=(v=val,min=0,max=100,Math.min(Math.max(v,min),max)),this._updateBar()}setWidth(viewer){if(!viewer)return;const scrollbarWidth=viewer.parentNode.offsetWidth-viewer.offsetWidth;if(scrollbarWidth>0){document.documentElement.style.setProperty("--loadingBar-end-offset","".concat(scrollbarWidth,"px"))}}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.StructTreeLayerBuilder=void 0;const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;exports.StructTreeLayerBuilder=class{constructor(_ref4){let{pdfPage:pdfPage}=_ref4;this.pdfPage=pdfPage}render(structTree){return this._walk(structTree)}_setAttributes(structElement,htmlElement){void 0!==structElement.alt&&htmlElement.setAttribute("aria-label",structElement.alt),void 0!==structElement.id&&htmlElement.setAttribute("aria-owns",structElement.id),void 0!==structElement.lang&&htmlElement.setAttribute("lang",structElement.lang)}_walk(node){if(!node)return null;const element=document.createElement("span");if("role"in node){const{role:role}=node,match=role.match(HEADING_PATTERN);match?(element.setAttribute("role","heading"),element.setAttribute("aria-level",match[1])):PDF_ROLE_TO_HTML_ROLE[role]&&element.setAttribute("role",PDF_ROLE_TO_HTML_ROLE[role])}if(this._setAttributes(node,element),node.children)if(1===node.children.length&&"id"in node.children[0])this._setAttributes(node.children[0],element);else for(const kid of node.children)element.appendChild(this._walk(kid));return element}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(3);exports.TextLayerBuilder=class{constructor(_ref5){let{textLayerDiv:textLayerDiv,eventBus:eventBus,pageIndex:pageIndex,viewport:viewport,highlighter:highlighter=null,enhanceTextSelection:enhanceTextSelection=!1}=_ref5;this.textLayerDiv=textLayerDiv,this.eventBus=eventBus,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=pageIndex+1,this.viewport=viewport,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=highlighter,this.enhanceTextSelection=enhanceTextSelection,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const endOfContent=document.createElement("div");endOfContent.className="endOfContent",this.textLayerDiv.appendChild(endOfContent)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(){var _this$highlighter;let timeout=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null===(_this$highlighter=this.highlighter)||void 0===_this$highlighter||_this$highlighter.setTextMapping(this.textDivs,this.textContentItemsStr);const textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=(0,_pdfjsLib.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:timeout,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((()=>{var _this$highlighter2;this.textLayerDiv.appendChild(textLayerFrag),this._finishRendering(),null===(_this$highlighter2=this.highlighter)||void 0===_this$highlighter2||_this$highlighter2.enable()}),(function(reason){}))}cancel(){var _this$highlighter3;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null===(_this$highlighter3=this.highlighter)||void 0===_this$highlighter3||_this$highlighter3.disable()}setTextContentStream(readableStream){this.cancel(),this.textContentStream=readableStream}setTextContent(textContent){this.cancel(),this.textContent=textContent}_bindMouse(){const div=this.textLayerDiv;let expandDivsTimer=null;div.addEventListener("mousedown",(evt=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(expandDivsTimer&&(clearTimeout(expandDivsTimer),expandDivsTimer=null));const end=div.querySelector(".endOfContent");if(!end)return;let adjustTop=evt.target!==div;if(adjustTop=adjustTop&&"none"!==window.getComputedStyle(end).getPropertyValue("-moz-user-select"),adjustTop){const divBounds=div.getBoundingClientRect(),r=Math.max(0,(evt.pageY-divBounds.top)/divBounds.height);end.style.top=(100*r).toFixed(2)+"%"}end.classList.add("active")})),div.addEventListener("mouseup",(()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(expandDivsTimer=setTimeout((()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),expandDivsTimer=null}),300));const end=div.querySelector(".endOfContent");end&&(end.style.top="",end.classList.remove("active"))}))}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.XfaLayerBuilder=void 0;var _pdfjsLib=__w_pdfjs_require__(3);exports.XfaLayerBuilder=class{constructor(_ref6){let{pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage=null,linkService:linkService,xfaHtml:xfaHtml=null}=_ref6;this.pageDiv=pageDiv,this.pdfPage=pdfPage,this.annotationStorage=annotationStorage,this.linkService=linkService,this.xfaHtml=xfaHtml,this.div=null,this._cancelled=!1}render(viewport){let intent=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";if("print"===intent){const parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:intent},div=document.createElement("div");this.pageDiv.appendChild(div),parameters.div=div;const result=_pdfjsLib.XfaLayer.render(parameters);return Promise.resolve(result)}return this.pdfPage.getXfa().then((xfaHtml=>{if(this._cancelled||!xfaHtml)return{textDivs:[]};const parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,xfaHtml:xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:intent};return this.div?_pdfjsLib.XfaLayer.update(parameters):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),parameters.div=this.div,_pdfjsLib.XfaLayer.render(parameters))})).catch((error=>{console.error(error)}))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFViewer=exports.PDFSinglePageViewer=void 0;var _ui_utils=__w_pdfjs_require__(6),_base_viewer=__w_pdfjs_require__(11);class PDFViewer extends _base_viewer.BaseViewer{}exports.PDFViewer=PDFViewer;class PDFSinglePageViewer extends _base_viewer.BaseViewer{_resetView(){super._resetView(),this._scrollMode=_ui_utils.ScrollMode.PAGE,this._spreadMode=_ui_utils.SpreadMode.NONE}set scrollMode(mode){}_updateScrollMode(){}set spreadMode(mode){}_updateSpreadMode(){}}exports.PDFSinglePageViewer=PDFSinglePageViewer},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{let _Symbol$iterator;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PagesCountLimit=exports.PDFPageViewBuffer=exports.BaseViewer=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_ui_utils=__w_pdfjs_require__(6),_annotation_layer_builder=__w_pdfjs_require__(2),_l10n_utils=__w_pdfjs_require__(4),_pdf_page_view=__w_pdfjs_require__(12),_pdf_rendering_queue=__w_pdfjs_require__(14),_pdf_link_service=__w_pdfjs_require__(5),_struct_tree_layer_builder=__w_pdfjs_require__(7),_text_highlighter=__w_pdfjs_require__(15),_text_layer_builder=__w_pdfjs_require__(8),_xfa_layer_builder=__w_pdfjs_require__(9);const PagesCountLimit={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};exports.PagesCountLimit=PagesCountLimit;var _buf=new WeakMap,_size=new WeakMap,_destroyFirstView=new WeakSet;_Symbol$iterator=Symbol.iterator;class PDFPageViewBuffer{constructor(size){_classPrivateMethodInitSpec(this,_destroyFirstView),_classPrivateFieldInitSpec(this,_buf,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,_size,{writable:!0,value:0}),_classPrivateFieldSet(this,_size,size)}push(view){const buf=_classPrivateFieldGet(this,_buf);buf.has(view)&&buf.delete(view),buf.add(view),buf.size>_classPrivateFieldGet(this,_size)&&_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}resize(newSize){let idsToKeep=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classPrivateFieldSet(this,_size,newSize);const buf=_classPrivateFieldGet(this,_buf);if(idsToKeep){const ii=buf.size;let i=1;for(const view of buf)if(idsToKeep.has(view.id)&&(buf.delete(view),buf.add(view)),++i>ii)break}for(;buf.size>_classPrivateFieldGet(this,_size);)_classPrivateMethodGet(this,_destroyFirstView,_destroyFirstView2).call(this)}has(view){return _classPrivateFieldGet(this,_buf).has(view)}[_Symbol$iterator](){return _classPrivateFieldGet(this,_buf).keys()}}function _destroyFirstView2(){const firstView=_classPrivateFieldGet(this,_buf).keys().next().value;null==firstView||firstView.destroy(),_classPrivateFieldGet(this,_buf).delete(firstView)}exports.PDFPageViewBuffer=PDFPageViewBuffer;var _buffer=new WeakMap,_annotationMode=new WeakMap,_previousAnnotationMode=new WeakMap,_enablePermissions=new WeakMap,_previousContainerHeight=new WeakMap,_scrollModePageState=new WeakMap,_onVisibilityChange=new WeakMap,_initializePermissions=new WeakSet,_onePageRenderedOrForceFetch=new WeakSet,_ensurePageViewVisible=new WeakSet,_isSameScale=new WeakSet,_ensurePdfPageLoaded=new WeakSet,_getScrollAhead=new WeakSet,_toggleLoadingIconSpinner=new WeakSet;class BaseViewer{constructor(options){var _this$container,_this$viewer,_options$textLayerMod,_options$annotationMo;if(_classPrivateMethodInitSpec(this,_toggleLoadingIconSpinner),_classPrivateMethodInitSpec(this,_getScrollAhead),_classPrivateMethodInitSpec(this,_ensurePdfPageLoaded),_classPrivateMethodInitSpec(this,_isSameScale),_classPrivateMethodInitSpec(this,_ensurePageViewVisible),_classPrivateMethodInitSpec(this,_onePageRenderedOrForceFetch),_classPrivateMethodInitSpec(this,_initializePermissions),_classPrivateFieldInitSpec(this,_buffer,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_annotationMode,{writable:!0,value:_pdfjsLib.AnnotationMode.ENABLE_FORMS}),_classPrivateFieldInitSpec(this,_previousAnnotationMode,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_enablePermissions,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_previousContainerHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,_scrollModePageState,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_onVisibilityChange,{writable:!0,value:null}),this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");if("2.14.34"!==_pdfjsLib.version)throw new Error('The API version "'.concat(_pdfjsLib.version,'" does not match the Viewer version "').concat("2.14.34",'".'));if(this.container=options.container,this.viewer=options.viewer||options.container.firstElementChild,"DIV"!==(null===(_this$container=this.container)||void 0===_this$container?void 0:_this$container.tagName.toUpperCase())||"DIV"!==(null===(_this$viewer=this.viewer)||void 0===_this$viewer?void 0:_this$viewer.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=options.eventBus,this.linkService=options.linkService||new _pdf_link_service.SimpleLinkService,this.downloadManager=options.downloadManager||null,this.findController=options.findController||null,this._scriptingManager=options.scriptingManager||null,this.removePageBorders=options.removePageBorders||!1,this.textLayerMode=null!==(_options$textLayerMod=options.textLayerMode)&&void 0!==_options$textLayerMod?_options$textLayerMod:_ui_utils.TextLayerMode.ENABLE,_classPrivateFieldSet(this,_annotationMode,null!==(_options$annotationMo=options.annotationMode)&&void 0!==_options$annotationMo?_options$annotationMo:_pdfjsLib.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=options.imageResourcesPath||"",this.enablePrintAutoRotate=options.enablePrintAutoRotate||!1,this.renderer=options.renderer||_ui_utils.RendererType.CANVAS,this.useOnlyCssZoom=options.useOnlyCssZoom||!1,this.maxCanvasPixels=options.maxCanvasPixels,this.l10n=options.l10n||_l10n_utils.NullL10n,_classPrivateFieldSet(this,_enablePermissions,options.enablePermissions||!1),this.defaultRenderingQueue=!options.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new _pdf_rendering_queue.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=options.renderingQueue,this._doc=document.documentElement,this.scroll=(0,_ui_utils.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=_ui_utils.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then((()=>{this.eventBus.dispatch("baseviewerinit",{source:this})}))}get pagesCount(){return this._pages.length}getPageView(index){return this._pages[index]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every((function(pageView){return null==pageView?void 0:pageView.pdfPage}))}get renderForms(){return _classPrivateFieldGet(this,_annotationMode)===_pdfjsLib.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(val){if(!Number.isInteger(val))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(val,!0)||console.error('currentPageNumber: "'.concat(val,'" is not a valid page.')))}_setCurrentPageNumber(val){var _this$_pageLabels,_this$_pageLabels2;let resetCurrentPageView=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===val)return resetCurrentPageView&&this._resetCurrentPageView(),!0;if(!(0<val&&val<=this.pagesCount))return!1;const previous=this._currentPageNumber;return this._currentPageNumber=val,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:val,pageLabel:null!==(_this$_pageLabels=null===(_this$_pageLabels2=this._pageLabels)||void 0===_this$_pageLabels2?void 0:_this$_pageLabels2[val-1])&&void 0!==_this$_pageLabels?_this$_pageLabels:null,previous:previous}),resetCurrentPageView&&this._resetCurrentPageView(),!0}get currentPageLabel(){var _this$_pageLabels3,_this$_pageLabels4;return null!==(_this$_pageLabels3=null===(_this$_pageLabels4=this._pageLabels)||void 0===_this$_pageLabels4?void 0:_this$_pageLabels4[this._currentPageNumber-1])&&void 0!==_this$_pageLabels3?_this$_pageLabels3:null}set currentPageLabel(val){if(!this.pdfDocument)return;let page=0|val;if(this._pageLabels){const i=this._pageLabels.indexOf(val);i>=0&&(page=i+1)}this._setCurrentPageNumber(page,!0)||console.error('currentPageLabel: "'.concat(val,'" is not a valid page.'))}get currentScale(){return this._currentScale!==_ui_utils.UNKNOWN_SCALE?this._currentScale:_ui_utils.DEFAULT_SCALE}set currentScale(val){if(isNaN(val))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(val,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(val){this.pdfDocument&&this._setScale(val,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(rotation){if(!(0,_ui_utils.isValidRotation)(rotation))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if((rotation%=360)<0&&(rotation+=360),this._pagesRotation===rotation)return;this._pagesRotation=rotation;const pageNumber=this._currentPageNumber,updateArgs={rotation:rotation};for(const pageView of this._pages)pageView.update(updateArgs);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:rotation,pageNumber:pageNumber}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(pdfDocument){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=pdfDocument,!pdfDocument)return;const isPureXfa=pdfDocument.isPureXfa,pagesCount=pdfDocument.numPages,firstPagePromise=pdfDocument.getPage(1),optionalContentConfigPromise=pdfDocument.getOptionalContentConfig(),permissionsPromise=_classPrivateFieldGet(this,_enablePermissions)?pdfDocument.getPermissions():Promise.resolve();if(pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const mode=this._scrollMode=_ui_utils.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:mode})}this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:pagesCount})}),(()=>{})),this._onBeforeDraw=evt=>{const pageView=this._pages[evt.pageNumber-1];pageView&&_classPrivateFieldGet(this,_buffer).push(pageView)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=evt=>{evt.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:evt.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,_classPrivateFieldGet(this,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([firstPagePromise,permissionsPromise]).then((_ref7=>{let[firstPdfPage,permissions]=_ref7;if(pdfDocument!==this.pdfDocument)return;this._firstPageCapability.resolve(firstPdfPage),this._optionalContentConfigPromise=optionalContentConfigPromise,_classPrivateMethodGet(this,_initializePermissions,_initializePermissions2).call(this,permissions);const viewerElement=this._scrollMode===_ui_utils.ScrollMode.PAGE?null:this.viewer,scale=this.currentScale,viewport=firstPdfPage.getViewport({scale:scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS}),textLayerFactory=this.textLayerMode===_ui_utils.TextLayerMode.DISABLE||isPureXfa?null:this,annotationLayerFactory=_classPrivateFieldGet(this,_annotationMode)!==_pdfjsLib.AnnotationMode.DISABLE?this:null,xfaLayerFactory=isPureXfa?this:null;for(let pageNum=1;pageNum<=pagesCount;++pageNum){const pageView=new _pdf_page_view.PDFPageView({container:viewerElement,eventBus:this.eventBus,id:pageNum,scale:scale,defaultViewport:viewport.clone(),optionalContentConfigPromise:optionalContentConfigPromise,renderingQueue:this.renderingQueue,textLayerFactory:textLayerFactory,textLayerMode:this.textLayerMode,annotationLayerFactory:annotationLayerFactory,annotationMode:_classPrivateFieldGet(this,_annotationMode),xfaLayerFactory:xfaLayerFactory,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(pageView)}const firstPageView=this._pages[0];firstPageView&&(firstPageView.setPdfPage(firstPdfPage),this.linkService.cachePageRef(1,firstPdfPage.ref)),this._scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this):this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._updateSpreadMode(),_classPrivateMethodGet(this,_onePageRenderedOrForceFetch,_onePageRenderedOrForceFetch2).call(this).then((async()=>{if(this.findController&&this.findController.setDocument(pdfDocument),this._scriptingManager&&this._scriptingManager.setDocument(pdfDocument),pdfDocument.loadingParams.disableAutoFetch||pagesCount>PagesCountLimit.FORCE_LAZY_PAGE_INIT)return void this._pagesCapability.resolve();let getPagesLeft=pagesCount-1;if(getPagesLeft<=0)this._pagesCapability.resolve();else for(let pageNum=2;pageNum<=pagesCount;++pageNum){const promise=pdfDocument.getPage(pageNum).then((pdfPage=>{const pageView=this._pages[pageNum-1];pageView.pdfPage||pageView.setPdfPage(pdfPage),this.linkService.cachePageRef(pageNum,pdfPage.ref),0==--getPagesLeft&&this._pagesCapability.resolve()}),(reason=>{console.error("Unable to get page ".concat(pageNum," to initialize viewer"),reason),0==--getPagesLeft&&this._pagesCapability.resolve()}));pageNum%PagesCountLimit.PAUSE_EAGER_PAGE_INIT==0&&await promise}})),this.eventBus.dispatch("pagesinit",{source:this}),pdfDocument.getMetadata().then((_ref8=>{let{info:info}=_ref8;pdfDocument===this.pdfDocument&&info.Language&&(this.viewer.lang=info.Language)})),this.defaultRenderingQueue&&this.update()})).catch((reason=>{console.error("Unable to initialize viewer",reason),this._pagesCapability.reject(reason)}))}setPageLabels(labels){if(this.pdfDocument){labels?Array.isArray(labels)&&this.pdfDocument.numPages===labels.length?this._pageLabels=labels:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let i=0,ii=this._pages.length;i<ii;i++){var _this$_pageLabels$i,_this$_pageLabels5;this._pages[i].setPageLabel(null!==(_this$_pageLabels$i=null===(_this$_pageLabels5=this._pageLabels)||void 0===_this$_pageLabels5?void 0:_this$_pageLabels5[i])&&void 0!==_this$_pageLabels$i?_this$_pageLabels$i:null)}}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=_ui_utils.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_classPrivateFieldSet(this,_buffer,new PDFPageViewBuffer(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,_pdfjsLib.createPromiseCapability)(),this._onePageRenderedCapability=(0,_pdfjsLib.createPromiseCapability)(),this._pagesCapability=(0,_pdfjsLib.createPromiseCapability)(),this._scrollMode=_ui_utils.ScrollMode.VERTICAL,this._previousScrollMode=_ui_utils.ScrollMode.UNKNOWN,this._spreadMode=_ui_utils.SpreadMode.NONE,_classPrivateFieldSet(this,_scrollModePageState,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),_classPrivateFieldGet(this,_onVisibilityChange)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove("enablePermissions"),null!==_classPrivateFieldGet(this,_previousAnnotationMode)&&(_classPrivateFieldSet(this,_annotationMode,_classPrivateFieldGet(this,_previousAnnotationMode)),_classPrivateFieldSet(this,_previousAnnotationMode,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_scrollIntoView(_ref9){let{pageDiv:pageDiv,pageSpot:pageSpot=null,pageNumber:pageNumber=null}=_ref9;if(this._scrollMode===_ui_utils.ScrollMode.PAGE&&(pageNumber&&this._setCurrentPageNumber(pageNumber),_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this),this.update()),!pageSpot&&!this.isInPresentationMode){const left=pageDiv.offsetLeft+pageDiv.clientLeft,right=left+pageDiv.clientWidth,{scrollLeft:scrollLeft,clientWidth:clientWidth}=this.container;(this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL||left<scrollLeft||right>scrollLeft+clientWidth)&&(pageSpot={left:0,top:0})}(0,_ui_utils.scrollIntoView)(pageDiv,pageSpot)}_setScaleUpdatePages(newScale,newValue){let noScroll=arguments.length>2&&void 0!==arguments[2]&&arguments[2],preset=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=newValue.toString(),_classPrivateMethodGet(this,_isSameScale,_isSameScale2).call(this,newScale))return void(preset&&this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:newValue}));this._doc.style.setProperty("--zoom-factor",newScale),this._doc.style.setProperty("--viewport-scale-factor",newScale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS);const updateArgs={scale:newScale};for(const pageView of this._pages)pageView.update(updateArgs);if(this._currentScale=newScale,!noScroll){let dest,page=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(page=this._location.pageNumber,dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:page,destArray:dest,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:preset?newValue:void 0}),this.defaultRenderingQueue&&this.update(),_classPrivateFieldSet(this,_previousContainerHeight,this.container.clientHeight)}get _pageWidthScaleFactor(){return this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._scrollMode!==_ui_utils.ScrollMode.HORIZONTAL?2:1}_setScale(value){let noScroll=arguments.length>1&&void 0!==arguments[1]&&arguments[1],scale=parseFloat(value);if(scale>0)this._setScaleUpdatePages(scale,value,noScroll,!1);else{const currentPage=this._pages[this._currentPageNumber-1];if(!currentPage)return;let hPadding=_ui_utils.SCROLLBAR_PADDING,vPadding=_ui_utils.VERTICAL_PADDING;this.isInPresentationMode?hPadding=vPadding=4:this.removePageBorders&&(hPadding=vPadding=0),this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL&&([hPadding,vPadding]=[vPadding,hPadding]);const pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale/this._pageWidthScaleFactor,pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":const horizontalScale=(0,_ui_utils.isPortraitOrientation)(currentPage)?pageWidthScale:Math.min(pageHeightScale,pageWidthScale);scale=Math.min(_ui_utils.MAX_AUTO_SCALE,horizontalScale);break;default:return void console.error('_setScale: "'.concat(value,'" is an unknown zoom value.'))}this._setScaleUpdatePages(scale,value,noScroll,!0)}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);const pageView=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:pageView.div})}pageLabelToPageNumber(label){if(!this._pageLabels)return null;const i=this._pageLabels.indexOf(label);return i<0?null:i+1}scrollPageIntoView(_ref10){let{pageNumber:pageNumber,destArray:destArray=null,allowNegativeOffset:allowNegativeOffset=!1,ignoreDestinationZoom:ignoreDestinationZoom=!1}=_ref10;if(!this.pdfDocument)return;const pageView=Number.isInteger(pageNumber)&&this._pages[pageNumber-1];if(!pageView)return void console.error('scrollPageIntoView: "'.concat(pageNumber,'" is not a valid pageNumber parameter.'));if(this.isInPresentationMode||!destArray)return void this._setCurrentPageNumber(pageNumber,!0);let widthScale,heightScale,x=0,y=0,width=0,height=0;const changeOrientation=pageView.rotation%180!=0,pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;let scale=0;switch(destArray[1].name){case"XYZ":x=destArray[2],y=destArray[3],scale=destArray[4],x=null!==x?x:0,y=null!==y?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=destArray[2],scale="page-width",null===y&&this._location?(x=this._location.left,y=this._location.top):("number"!=typeof y||y<0)&&(y=pageHeight);break;case"FitV":case"FitBV":x=destArray[2],width=pageWidth,height=pageHeight,scale="page-height";break;case"FitR":x=destArray[2],y=destArray[3],width=destArray[4]-x,height=destArray[5]-y;const hPadding=this.removePageBorders?0:_ui_utils.SCROLLBAR_PADDING,vPadding=this.removePageBorders?0:_ui_utils.VERTICAL_PADDING;widthScale=(this.container.clientWidth-hPadding)/width/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,heightScale=(this.container.clientHeight-vPadding)/height/_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return void console.error('scrollPageIntoView: "'.concat(destArray[1].name,'" is not a valid destination type.'))}if(ignoreDestinationZoom||(scale&&scale!==this._currentScale?this.currentScaleValue=scale:this._currentScale===_ui_utils.UNKNOWN_SCALE&&(this.currentScaleValue=_ui_utils.DEFAULT_SCALE_VALUE)),"page-fit"===scale&&!destArray[4])return void this._scrollIntoView({pageDiv:pageView.div,pageNumber:pageNumber});const boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)];let left=Math.min(boundingRect[0][0],boundingRect[1][0]),top=Math.min(boundingRect[0][1],boundingRect[1][1]);allowNegativeOffset||(left=Math.max(left,0),top=Math.max(top,0)),this._scrollIntoView({pageDiv:pageView.div,pageSpot:{left:left,top:top},pageNumber:pageNumber})}_updateLocation(firstPage){const currentScale=this._currentScale,currentScaleValue=this._currentScaleValue,normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(1e4*currentScale)/100:currentScaleValue,pageNumber=firstPage.id;let pdfOpenParams="#page="+pageNumber;pdfOpenParams+="&zoom="+normalizedScaleValue;const currentPageView=this._pages[pageNumber-1],container=this.container,topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y),intLeft=Math.round(topLeft[0]),intTop=Math.round(topLeft[1]);pdfOpenParams+=","+intLeft+","+intTop,this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,rotation:this._pagesRotation,pdfOpenParams:pdfOpenParams}}update(){const visible=this._getVisiblePages(),visiblePages=visible.views,numVisiblePages=visiblePages.length;if(0===numVisiblePages)return;const newCacheSize=Math.max(10,2*numVisiblePages+1);if(_classPrivateFieldGet(this,_buffer).resize(newCacheSize,visible.ids),this.renderingQueue.renderHighestPriority(visible),!this.isInPresentationMode){const isSimpleLayout=this._spreadMode===_ui_utils.SpreadMode.NONE&&(this._scrollMode===_ui_utils.ScrollMode.PAGE||this._scrollMode===_ui_utils.ScrollMode.VERTICAL);let currentId=this._currentPageNumber,stillFullyVisible=!1;for(const page of visiblePages){if(page.percent<100)break;if(page.id===currentId&&isSimpleLayout){stillFullyVisible=!0;break}}stillFullyVisible||(currentId=visiblePages[0].id),this._setCurrentPageNumber(currentId)}this._updateLocation(visible.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(element){return this.container.contains(element)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===_ui_utils.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===_ui_utils.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};const pageView=this._pages[this._currentPageNumber-1],element=pageView.div,view={id:pageView.id,x:element.offsetLeft+element.clientLeft,y:element.offsetTop+element.clientTop,view:pageView};return{first:view,last:view,views:[view],ids:new Set([pageView.id])}}_getVisiblePages(){if(this.isInPresentationMode)return this._getCurrentVisiblePage();const views=this._scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateFieldGet(this,_scrollModePageState).pages:this._pages,horizontal=this._scrollMode===_ui_utils.ScrollMode.HORIZONTAL,rtl=horizontal&&this._isContainerRtl;return(0,_ui_utils.getVisibleElements)({scrollEl:this.container,views:views,sortByVisibility:!0,horizontal:horizontal,rtl:rtl})}isPageVisible(pageNumber){return!!this.pdfDocument&&(Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount?this._getVisiblePages().ids.has(pageNumber):(console.error('isPageVisible: "'.concat(pageNumber,'" is not a valid page.')),!1))}isPageCached(pageNumber){if(!this.pdfDocument)return!1;if(!(Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount))return console.error('isPageCached: "'.concat(pageNumber,'" is not a valid page.')),!1;const pageView=this._pages[pageNumber-1];return _classPrivateFieldGet(this,_buffer).has(pageView)}cleanup(){for(let i=0,ii=this._pages.length;i<ii;i++)this._pages[i]&&this._pages[i].renderingState!==_ui_utils.RenderingStates.FINISHED&&this._pages[i].reset()}_cancelRendering(){for(let i=0,ii=this._pages.length;i<ii;i++)this._pages[i]&&this._pages[i].cancelRendering()}forceRendering(currentlyVisiblePages){const visiblePages=currentlyVisiblePages||this._getVisiblePages(),scrollAhead=_classPrivateMethodGet(this,_getScrollAhead,_getScrollAhead2).call(this,visiblePages),preRenderExtra=this._spreadMode!==_ui_utils.SpreadMode.NONE&&this._scrollMode!==_ui_utils.ScrollMode.HORIZONTAL,pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,scrollAhead,preRenderExtra);return _classPrivateMethodGet(this,_toggleLoadingIconSpinner,_toggleLoadingIconSpinner2).call(this,visiblePages.ids),!!pageView&&(_classPrivateMethodGet(this,_ensurePdfPageLoaded,_ensurePdfPageLoaded2).call(this,pageView).then((()=>{this.renderingQueue.renderView(pageView)})),!0)}createTextLayerBuilder(textLayerDiv,pageIndex,viewport){let enhanceTextSelection=arguments.length>3&&void 0!==arguments[3]&&arguments[3],eventBus=arguments.length>4?arguments[4]:void 0,highlighter=arguments.length>5?arguments[5]:void 0;return new _text_layer_builder.TextLayerBuilder({textLayerDiv:textLayerDiv,eventBus:eventBus,pageIndex:pageIndex,viewport:viewport,enhanceTextSelection:!this.isInPresentationMode&&enhanceTextSelection,highlighter:highlighter})}createTextHighlighter(pageIndex,eventBus){return new _text_highlighter.TextHighlighter({eventBus:eventBus,pageIndex:pageIndex,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(pageDiv,pdfPage){var _this$pdfDocument,_this$pdfDocument2,_this$pdfDocument3,_this$_scriptingManag;let annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,imageResourcesPath=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",renderForms=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l10n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_l10n_utils.NullL10n,enableScripting=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,hasJSActionsPromise=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,mouseState=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,fieldObjectsPromise=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,annotationCanvasMap=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return new _annotation_layer_builder.AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage||(null===(_this$pdfDocument=this.pdfDocument)||void 0===_this$pdfDocument?void 0:_this$pdfDocument.annotationStorage),imageResourcesPath:imageResourcesPath,renderForms:renderForms,linkService:this.linkService,downloadManager:this.downloadManager,l10n:l10n,enableScripting:null!=enableScripting?enableScripting:this.enableScripting,hasJSActionsPromise:hasJSActionsPromise||(null===(_this$pdfDocument2=this.pdfDocument)||void 0===_this$pdfDocument2?void 0:_this$pdfDocument2.hasJSActions()),fieldObjectsPromise:fieldObjectsPromise||(null===(_this$pdfDocument3=this.pdfDocument)||void 0===_this$pdfDocument3?void 0:_this$pdfDocument3.getFieldObjects()),mouseState:mouseState||(null===(_this$_scriptingManag=this._scriptingManager)||void 0===_this$_scriptingManag?void 0:_this$_scriptingManag.mouseState),annotationCanvasMap:annotationCanvasMap})}createXfaLayerBuilder(pageDiv,pdfPage){var _this$pdfDocument4;let annotationStorage=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new _xfa_layer_builder.XfaLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,annotationStorage:annotationStorage||(null===(_this$pdfDocument4=this.pdfDocument)||void 0===_this$pdfDocument4?void 0:_this$pdfDocument4.annotationStorage),linkService:this.linkService})}createStructTreeLayerBuilder(pdfPage){return new _struct_tree_layer_builder.StructTreeLayerBuilder({pdfPage:pdfPage})}get hasEqualPageSizes(){const firstPageView=this._pages[0];for(let i=1,ii=this._pages.length;i<ii;++i){const pageView=this._pages[i];if(pageView.width!==firstPageView.width||pageView.height!==firstPageView.height)return!1}return!0}getPagesOverview(){return this._pages.map((pageView=>{const viewport=pageView.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,_ui_utils.isPortraitOrientation)(viewport)?{width:viewport.width,height:viewport.height,rotation:viewport.rotation}:{width:viewport.height,height:viewport.width,rotation:(viewport.rotation-90)%360}}))}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(promise){if(!(promise instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(promise));if(!this.pdfDocument)return;if(!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=promise;const updateArgs={optionalContentConfigPromise:promise};for(const pageView of this._pages)pageView.update(updateArgs);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:promise})}get scrollMode(){return this._scrollMode}set scrollMode(mode){if(this._scrollMode!==mode){if(!(0,_ui_utils.isValidScrollMode)(mode))throw new Error("Invalid scroll mode: ".concat(mode));this.pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=mode,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:mode}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(){let pageNumber=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const scrollMode=this._scrollMode,viewer=this.viewer;viewer.classList.toggle("scrollHorizontal",scrollMode===_ui_utils.ScrollMode.HORIZONTAL),viewer.classList.toggle("scrollWrapped",scrollMode===_ui_utils.ScrollMode.WRAPPED),this.pdfDocument&&pageNumber&&(scrollMode===_ui_utils.ScrollMode.PAGE?_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this):this._previousScrollMode===_ui_utils.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(pageNumber,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(mode){if(this._spreadMode!==mode){if(!(0,_ui_utils.isValidSpreadMode)(mode))throw new Error("Invalid spread mode: ".concat(mode));this._spreadMode=mode,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:mode}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(){let pageNumber=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.pdfDocument)return;const viewer=this.viewer,pages=this._pages;if(this._scrollMode===_ui_utils.ScrollMode.PAGE)_classPrivateMethodGet(this,_ensurePageViewVisible,_ensurePageViewVisible2).call(this);else if(viewer.textContent="",this._spreadMode===_ui_utils.SpreadMode.NONE)for(let i=0,ii=pages.length;i<ii;++i)viewer.appendChild(pages[i].div);else{const parity=this._spreadMode-1;let spread=null;for(let i=0,ii=pages.length;i<ii;++i)null===spread?(spread=document.createElement("div"),spread.className="spread",viewer.appendChild(spread)):i%2===parity&&(spread=spread.cloneNode(!1),viewer.appendChild(spread)),spread.appendChild(pages[i].div)}pageNumber&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(pageNumber,!0),this.update())}_getPageAdvance(currentPageNumber){let previous=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case _ui_utils.ScrollMode.WRAPPED:{const{views:views}=this._getVisiblePages(),pageLayout=new Map;for(const{id:id,y:y,percent:percent,widthPercent:widthPercent}of views){if(0===percent||widthPercent<100)continue;let yArray=pageLayout.get(y);yArray||pageLayout.set(y,yArray||(yArray=[])),yArray.push(id)}for(const yArray of pageLayout.values()){const currentIndex=yArray.indexOf(currentPageNumber);if(-1===currentIndex)continue;const numPages=yArray.length;if(1===numPages)break;if(previous)for(let i=currentIndex-1,ii=0;i>=ii;i--){const currentId=yArray[i],expectedId=yArray[i+1]-1;if(currentId<expectedId)return currentPageNumber-expectedId}else for(let i=currentIndex+1,ii=numPages;i<ii;i++){const currentId=yArray[i],expectedId=yArray[i-1]+1;if(currentId>expectedId)return expectedId-currentPageNumber}if(previous){const firstId=yArray[0];if(firstId<currentPageNumber)return currentPageNumber-firstId+1}else{const lastId=yArray[numPages-1];if(lastId>currentPageNumber)return lastId-currentPageNumber+1}break}break}case _ui_utils.ScrollMode.HORIZONTAL:break;case _ui_utils.ScrollMode.PAGE:case _ui_utils.ScrollMode.VERTICAL:{if(this._spreadMode===_ui_utils.SpreadMode.NONE)break;const parity=this._spreadMode-1;if(previous&&currentPageNumber%2!==parity)break;if(!previous&&currentPageNumber%2===parity)break;const{views:views}=this._getVisiblePages(),expectedId=previous?currentPageNumber-1:currentPageNumber+1;for(const{id:id,percent:percent,widthPercent:widthPercent}of views)if(id===expectedId){if(percent>0&&100===widthPercent)return 2;break}break}}return 1}nextPage(){const currentPageNumber=this._currentPageNumber,pagesCount=this.pagesCount;if(currentPageNumber>=pagesCount)return!1;const advance=this._getPageAdvance(currentPageNumber,!1)||1;return this.currentPageNumber=Math.min(currentPageNumber+advance,pagesCount),!0}previousPage(){const currentPageNumber=this._currentPageNumber;if(currentPageNumber<=1)return!1;const advance=this._getPageAdvance(currentPageNumber,!0)||1;return this.currentPageNumber=Math.max(currentPageNumber-advance,1),!0}increaseScale(){let steps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,newScale=this._currentScale;do{newScale=(newScale*_ui_utils.DEFAULT_SCALE_DELTA).toFixed(2),newScale=Math.ceil(10*newScale)/10,newScale=Math.min(_ui_utils.MAX_SCALE,newScale)}while(--steps>0&&newScale<_ui_utils.MAX_SCALE);this.currentScaleValue=newScale}decreaseScale(){let steps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,newScale=this._currentScale;do{newScale=(newScale/_ui_utils.DEFAULT_SCALE_DELTA).toFixed(2),newScale=Math.floor(10*newScale)/10,newScale=Math.max(_ui_utils.MIN_SCALE,newScale)}while(--steps>0&&newScale>_ui_utils.MIN_SCALE);this.currentScaleValue=newScale}}function _initializePermissions2(permissions){permissions&&(permissions.includes(_pdfjsLib.PermissionFlag.COPY)||this.viewer.classList.add("enablePermissions"),permissions.includes(_pdfjsLib.PermissionFlag.MODIFY_ANNOTATIONS)||permissions.includes(_pdfjsLib.PermissionFlag.FILL_INTERACTIVE_FORMS)||_classPrivateFieldGet(this,_annotationMode)===_pdfjsLib.AnnotationMode.ENABLE_FORMS&&(_classPrivateFieldSet(this,_previousAnnotationMode,_classPrivateFieldGet(this,_annotationMode)),_classPrivateFieldSet(this,_annotationMode,_pdfjsLib.AnnotationMode.ENABLE)))}function _onePageRenderedOrForceFetch2(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const visibilityChangePromise=new Promise((resolve=>{_classPrivateFieldSet(this,_onVisibilityChange,(()=>{"hidden"===document.visibilityState&&(resolve(),document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange)),_classPrivateFieldSet(this,_onVisibilityChange,null))})),document.addEventListener("visibilitychange",_classPrivateFieldGet(this,_onVisibilityChange))}));return Promise.race([this._onePageRenderedCapability.promise,visibilityChangePromise])}function _ensurePageViewVisible2(){if(this._scrollMode!==_ui_utils.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const pageNumber=this._currentPageNumber,state=_classPrivateFieldGet(this,_scrollModePageState),viewer=this.viewer;if(viewer.textContent="",state.pages.length=0,this._spreadMode===_ui_utils.SpreadMode.NONE){const pageView=this._pages[pageNumber-1];if(this.isInPresentationMode){const spread=document.createElement("div");spread.className="spread";const dummyPage=document.createElement("div");dummyPage.className="dummyPage",dummyPage.style.height="".concat(this.container.clientHeight,"px"),spread.appendChild(dummyPage),spread.appendChild(pageView.div),viewer.appendChild(spread)}else viewer.appendChild(pageView.div);state.pages.push(pageView)}else{const pageIndexSet=new Set,parity=this._spreadMode-1;pageNumber%2!==parity?(pageIndexSet.add(pageNumber-1),pageIndexSet.add(pageNumber)):(pageIndexSet.add(pageNumber-2),pageIndexSet.add(pageNumber-1));let spread=null;for(const i of pageIndexSet){const pageView=this._pages[i];pageView&&(null===spread?(spread=document.createElement("div"),spread.className="spread",viewer.appendChild(spread)):i%2===parity&&(spread=spread.cloneNode(!1),viewer.appendChild(spread)),spread.appendChild(pageView.div),state.pages.push(pageView))}}state.scrollDown=pageNumber>=state.previousPageNumber,state.previousPageNumber=pageNumber}function _isSameScale2(newScale){return(!this.isInPresentationMode||this.container.clientHeight===_classPrivateFieldGet(this,_previousContainerHeight))&&(newScale===this._currentScale||Math.abs(newScale-this._currentScale)<1e-15)}async function _ensurePdfPageLoaded2(pageView){if(pageView.pdfPage)return pageView.pdfPage;try{var _this$linkService$_ca,_this$linkService;const pdfPage=await this.pdfDocument.getPage(pageView.id);return pageView.pdfPage||pageView.setPdfPage(pdfPage),null!==(_this$linkService$_ca=(_this$linkService=this.linkService)._cachedPageNumber)&&void 0!==_this$linkService$_ca&&_this$linkService$_ca.call(_this$linkService,pdfPage.ref)||this.linkService.cachePageRef(pageView.id,pdfPage.ref),pdfPage}catch(reason){return console.error("Unable to get page for page view",reason),null}}function _getScrollAhead2(visible){var _visible$first,_visible$last;if(1===(null===(_visible$first=visible.first)||void 0===_visible$first?void 0:_visible$first.id))return!0;if((null===(_visible$last=visible.last)||void 0===_visible$last?void 0:_visible$last.id)===this.pagesCount)return!1;switch(this._scrollMode){case _ui_utils.ScrollMode.PAGE:return _classPrivateFieldGet(this,_scrollModePageState).scrollDown;case _ui_utils.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _toggleLoadingIconSpinner2(visibleIds){for(const id of visibleIds){const pageView=this._pages[id-1];null==pageView||pageView.toggleLoadingIconSpinner(!0)}for(const pageView of _classPrivateFieldGet(this,_buffer))visibleIds.has(pageView.id)||pageView.toggleLoadingIconSpinner(!1)}exports.BaseViewer=BaseViewer},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFPageView=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_ui_utils=__w_pdfjs_require__(6),_app_options=__w_pdfjs_require__(13),_l10n_utils=__w_pdfjs_require__(4);const MAX_CANVAS_PIXELS=_app_options.compatibilityParams.maxCanvasPixels||16777216;var _annotationMode2=new WeakMap;exports.PDFPageView=class{constructor(options){var _options$textLayerMod2,_options$annotationMo2,_options$textHighligh,_this$renderingQueue;_classPrivateFieldInitSpec(this,_annotationMode2,{writable:!0,value:_pdfjsLib.AnnotationMode.ENABLE_FORMS});const container=options.container,defaultViewport=options.defaultViewport;this.id=options.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=options.scale||_ui_utils.DEFAULT_SCALE,this.viewport=defaultViewport,this.pdfPageRotate=defaultViewport.rotation,this._optionalContentConfigPromise=options.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!==(_options$textLayerMod2=options.textLayerMode)&&void 0!==_options$textLayerMod2?_options$textLayerMod2:_ui_utils.TextLayerMode.ENABLE,_classPrivateFieldSet(this,_annotationMode2,null!==(_options$annotationMo2=options.annotationMode)&&void 0!==_options$annotationMo2?_options$annotationMo2:_pdfjsLib.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=options.imageResourcesPath||"",this.useOnlyCssZoom=options.useOnlyCssZoom||!1,this.maxCanvasPixels=options.maxCanvasPixels||MAX_CANVAS_PIXELS,this.eventBus=options.eventBus,this.renderingQueue=options.renderingQueue,this.textLayerFactory=options.textLayerFactory,this.annotationLayerFactory=options.annotationLayerFactory,this.xfaLayerFactory=options.xfaLayerFactory,this.textHighlighter=null===(_options$textHighligh=options.textHighlighterFactory)||void 0===_options$textHighligh?void 0:_options$textHighligh.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=options.structTreeLayerFactory,this.renderer=options.renderer||_ui_utils.RendererType.CANVAS,this.l10n=options.l10n||_l10n_utils.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=_ui_utils.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null!==(_this$renderingQueue=this.renderingQueue)&&void 0!==_this$renderingQueue&&_this$renderingQueue.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const div=document.createElement("div");div.className="page",div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px",div.setAttribute("data-page-number",this.id),div.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then((msg=>{div.setAttribute("aria-label",msg)})),this.div=div,null==container||container.appendChild(div)}setPdfPage(pdfPage){this.pdfPage=pdfPage,this.pdfPageRotate=pdfPage.rotate;const totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport({scale:this.scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:totalRotation}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let error=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(ex){error=ex}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:error})}}async _renderXfaLayer(){let error=null;try{const result=await this.xfaLayer.render(this.viewport,"display");this.textHighlighter&&this._buildXfaTextContentItems(result.textDivs)}catch(ex){error=ex}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:error})}}async _buildXfaTextContentItems(textDivs){const text=await this.pdfPage.getTextContent(),items=[];for(const item of text.items)items.push(item.str);this.textHighlighter.setTextMapping(textDivs,items),this.textHighlighter.enable()}_resetZoomLayer(){let removeFromDOM=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.zoomLayer)return;const zoomLayerCanvas=this.zoomLayer.firstChild;this.paintedViewportMap.delete(zoomLayerCanvas),zoomLayerCanvas.width=0,zoomLayerCanvas.height=0,removeFromDOM&&this.zoomLayer.remove(),this.zoomLayer=null}reset(){var _this$annotationLayer,_this$xfaLayer;let{keepZoomLayer:keepZoomLayer=!1,keepAnnotationLayer:keepAnnotationLayer=!1,keepXfaLayer:keepXfaLayer=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cancelRendering({keepAnnotationLayer:keepAnnotationLayer,keepXfaLayer:keepXfaLayer}),this.renderingState=_ui_utils.RenderingStates.INITIAL;const div=this.div;div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px";const childNodes=div.childNodes,zoomLayerNode=keepZoomLayer&&this.zoomLayer||null,annotationLayerNode=keepAnnotationLayer&&(null===(_this$annotationLayer=this.annotationLayer)||void 0===_this$annotationLayer?void 0:_this$annotationLayer.div)||null,xfaLayerNode=keepXfaLayer&&(null===(_this$xfaLayer=this.xfaLayer)||void 0===_this$xfaLayer?void 0:_this$xfaLayer.div)||null;for(let i=childNodes.length-1;i>=0;i--){const node=childNodes[i];switch(node){case zoomLayerNode:case annotationLayerNode:case xfaLayerNode:continue}node.remove()}div.removeAttribute("data-loaded"),annotationLayerNode&&this.annotationLayer.hide(),xfaLayerNode&&this.xfaLayer.hide(),zoomLayerNode||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then((msg=>{var _this$loadingIconDiv;null===(_this$loadingIconDiv=this.loadingIconDiv)||void 0===_this$loadingIconDiv||_this$loadingIconDiv.setAttribute("aria-label",msg)})),div.appendChild(this.loadingIconDiv)}update(_ref11){let{scale:scale=0,rotation:rotation=null,optionalContentConfigPromise:optionalContentConfigPromise=null}=_ref11;this.scale=scale||this.scale,"number"==typeof rotation&&(this.rotation=rotation),optionalContentConfigPromise instanceof Promise&&(this._optionalContentConfigPromise=optionalContentConfigPromise);const totalRotation=(this.rotation+this.pdfPageRotate)%360,viewportScale=this.scale*_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS;if(this.viewport=this.viewport.clone({scale:viewportScale,rotation:totalRotation}),this._isStandalone){const{style:style}=document.documentElement;style.setProperty("--zoom-factor",this.scale),style.setProperty("--viewport-scale-factor",viewportScale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let isScalingRestricted=!1;if(this.canvas&&this.maxCanvasPixels>0){const outputScale=this.outputScale;(Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>this.maxCanvasPixels&&(isScalingRestricted=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering(){let{keepAnnotationLayer:keepAnnotationLayer=!1,keepXfaLayer:keepXfaLayer=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var _this$textHighlighter;(this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!this.annotationLayer||keepAnnotationLayer&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.xfaLayer||keepXfaLayer&&this.xfaLayer.div)||(this.xfaLayer.cancel(),this.xfaLayer=null,null===(_this$textHighlighter=this.textHighlighter)||void 0===_this$textHighlighter||_this$textHighlighter.disable());this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform(_ref12){let{target:target,redrawAnnotationLayer:redrawAnnotationLayer=!1,redrawXfaLayer:redrawXfaLayer=!1}=_ref12;const width=this.viewport.width,height=this.viewport.height,div=this.div;target.style.width=target.parentNode.style.width=div.style.width=Math.floor(width)+"px",target.style.height=target.parentNode.style.height=div.style.height=Math.floor(height)+"px";const relativeRotation=this.viewport.rotation-this.paintedViewportMap.get(target).rotation,absRotation=Math.abs(relativeRotation);let scaleX=1,scaleY=1;if(90!==absRotation&&270!==absRotation||(scaleX=height/width,scaleY=width/height),target.style.transform="rotate(".concat(relativeRotation,"deg) scale(").concat(scaleX,", ").concat(scaleY,")"),this.textLayer){const textLayerViewport=this.textLayer.viewport,textRelativeRotation=this.viewport.rotation-textLayerViewport.rotation,textAbsRotation=Math.abs(textRelativeRotation);let scale=width/textLayerViewport.width;90!==textAbsRotation&&270!==textAbsRotation||(scale=width/textLayerViewport.height);const textLayerDiv=this.textLayer.textLayerDiv;let transX,transY;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0,transY="-"+textLayerDiv.style.height;break;case 180:transX="-"+textLayerDiv.style.width,transY="-"+textLayerDiv.style.height;break;case 270:transX="-"+textLayerDiv.style.width,transY=0;break;default:console.error("Bad rotation value.")}textLayerDiv.style.transform="rotate(".concat(textAbsRotation,"deg) ")+"scale(".concat(scale,") ")+"translate(".concat(transX,", ").concat(transY,")"),textLayerDiv.style.transformOrigin="0% 0%"}redrawAnnotationLayer&&this.annotationLayer&&this._renderAnnotationLayer(),redrawXfaLayer&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(x,y){return this.viewport.convertToPdfPoint(x,y)}toggleLoadingIconSpinner(){var _this$loadingIconDiv2;let viewVisible=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(_this$loadingIconDiv2=this.loadingIconDiv)||void 0===_this$loadingIconDiv2||_this$loadingIconDiv2.classList.toggle("notVisible",!viewVisible)}draw(){var _this$annotationLayer2,_this$xfaLayer2,_this=this;this.renderingState!==_ui_utils.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:div,pdfPage:pdfPage}=this;if(!pdfPage)return this.renderingState=_ui_utils.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=_ui_utils.RenderingStates.RUNNING;const canvasWrapper=document.createElement("div");canvasWrapper.style.width=div.style.width,canvasWrapper.style.height=div.style.height,canvasWrapper.classList.add("canvasWrapper"),null!==(_this$annotationLayer2=this.annotationLayer)&&void 0!==_this$annotationLayer2&&_this$annotationLayer2.div?div.insertBefore(canvasWrapper,this.annotationLayer.div):div.appendChild(canvasWrapper);let textLayer=null;if(this.textLayerMode!==_ui_utils.TextLayerMode.DISABLE&&this.textLayerFactory){var _this$annotationLayer3;const textLayerDiv=document.createElement("div");textLayerDiv.className="textLayer",textLayerDiv.style.width=canvasWrapper.style.width,textLayerDiv.style.height=canvasWrapper.style.height,null!==(_this$annotationLayer3=this.annotationLayer)&&void 0!==_this$annotationLayer3&&_this$annotationLayer3.div?div.insertBefore(textLayerDiv,this.annotationLayer.div):div.appendChild(textLayerDiv),textLayer=this.textLayerFactory.createTextLayerBuilder(textLayerDiv,this.id-1,this.viewport,this.textLayerMode===_ui_utils.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=textLayer,_classPrivateFieldGet(this,_annotationMode2)!==_pdfjsLib.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(div,pdfPage,null,this.imageResourcesPath,_classPrivateFieldGet(this,_annotationMode2)===_pdfjsLib.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),null!==(_this$xfaLayer2=this.xfaLayer)&&void 0!==_this$xfaLayer2&&_this$xfaLayer2.div&&div.appendChild(this.xfaLayer.div);let renderContinueCallback=null;this.renderingQueue&&(renderContinueCallback=cont=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=_ui_utils.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=_ui_utils.RenderingStates.RUNNING,cont()});cont()});const finishPaintTask=async function(){let error=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(paintTask===_this.paintTask&&(_this.paintTask=null),error instanceof _pdfjsLib.RenderingCancelledException)_this._renderError=null;else if(_this._renderError=error,_this.renderingState=_ui_utils.RenderingStates.FINISHED,_this.loadingIconDiv&&(_this.loadingIconDiv.remove(),delete _this.loadingIconDiv),_this._resetZoomLayer(!0),_this.eventBus.dispatch("pagerendered",{source:_this,pageNumber:_this.id,cssTransform:!1,timestamp:performance.now(),error:_this._renderError}),error)throw error},paintTask=this.renderer===_ui_utils.RendererType.SVG?this.paintOnSvg(canvasWrapper):this.paintOnCanvas(canvasWrapper);paintTask.onRenderContinue=renderContinueCallback,this.paintTask=paintTask;const resultPromise=paintTask.promise.then((()=>finishPaintTask(null).then((()=>{if(textLayer){const readableStream=pdfPage.streamTextContent({includeMarkedContent:!0});textLayer.setTextContentStream(readableStream),textLayer.render()}this.annotationLayer&&this._renderAnnotationLayer()}))),(function(reason){return finishPaintTask(reason)}));return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(div,pdfPage,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=event=>{event.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then((tree=>{if(!tree)return;if(!this.canvas)return;const treeDom=this.structTreeLayer.render(tree);treeDom.classList.add("structTree"),this.canvas.appendChild(treeDom)})))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(pdfPage)),div.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),resultPromise}paintOnCanvas(canvasWrapper){const renderCapability=(0,_pdfjsLib.createPromiseCapability)(),result={promise:renderCapability.promise,onRenderContinue(cont){cont()},cancel(){renderTask.cancel()}},viewport=this.viewport,canvas=document.createElement("canvas");canvas.hidden=!0;let isCanvasHidden=!0;const showCanvas=function(){isCanvasHidden&&(canvas.hidden=!1,isCanvasHidden=!1)};canvasWrapper.appendChild(canvas),this.canvas=canvas,canvas.mozOpaque=!0;const ctx=canvas.getContext("2d",{alpha:!1}),outputScale=this.outputScale=new _ui_utils.OutputScale;if(this.useOnlyCssZoom){const actualSizeViewport=viewport.clone({scale:_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS});outputScale.sx*=actualSizeViewport.width/viewport.width,outputScale.sy*=actualSizeViewport.height/viewport.height}if(this.maxCanvasPixels>0){const pixelsInViewport=viewport.width*viewport.height,maxScale=Math.sqrt(this.maxCanvasPixels/pixelsInViewport);outputScale.sx>maxScale||outputScale.sy>maxScale?(outputScale.sx=maxScale,outputScale.sy=maxScale,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const sfx=(0,_ui_utils.approximateFraction)(outputScale.sx),sfy=(0,_ui_utils.approximateFraction)(outputScale.sy);canvas.width=(0,_ui_utils.roundToDivide)(viewport.width*outputScale.sx,sfx[0]),canvas.height=(0,_ui_utils.roundToDivide)(viewport.height*outputScale.sy,sfy[0]),canvas.style.width=(0,_ui_utils.roundToDivide)(viewport.width,sfx[1])+"px",canvas.style.height=(0,_ui_utils.roundToDivide)(viewport.height,sfy[1])+"px",this.paintedViewportMap.set(canvas,viewport);const renderContext={canvasContext:ctx,transform:outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null,viewport:this.viewport,annotationMode:_classPrivateFieldGet(this,_annotationMode2),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap},renderTask=this.pdfPage.render(renderContext);return renderTask.onContinue=function(cont){showCanvas(),result.onRenderContinue?result.onRenderContinue(cont):cont()},renderTask.promise.then((function(){showCanvas(),renderCapability.resolve()}),(function(error){showCanvas(),renderCapability.reject(error)})),result}paintOnSvg(wrapper){let cancelled=!1;const ensureNotCancelled=()=>{if(cancelled)throw new _pdfjsLib.RenderingCancelledException("Rendering cancelled, page ".concat(this.id),"svg")},pdfPage=this.pdfPage,actualSizeViewport=this.viewport.clone({scale:_pdfjsLib.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:pdfPage.getOperatorList({annotationMode:_classPrivateFieldGet(this,_annotationMode2)}).then((opList=>{ensureNotCancelled();return new _pdfjsLib.SVGGraphics(pdfPage.commonObjs,pdfPage.objs).getSVG(opList,actualSizeViewport).then((svg=>{ensureNotCancelled(),this.svg=svg,this.paintedViewportMap.set(svg,actualSizeViewport),svg.style.width=wrapper.style.width,svg.style.height=wrapper.style.height,this.renderingState=_ui_utils.RenderingStates.FINISHED,wrapper.appendChild(svg)}))})),onRenderContinue(cont){cont()},cancel(){cancelled=!0}}}setPageLabel(label){this.pageLabel="string"==typeof label?label:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.compatibilityParams=exports.OptionKind=exports.AppOptions=void 0;const compatibilityParams=Object.create(null);exports.compatibilityParams=compatibilityParams;{const userAgent=navigator.userAgent||"",platform=navigator.platform||"",maxTouchPoints=navigator.maxTouchPoints||1,isAndroid=/Android/.test(userAgent);(/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent)||"MacIntel"===platform&&maxTouchPoints>1||isAndroid)&&(compatibilityParams.maxCanvasPixels=5242880)}const OptionKind={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};exports.OptionKind=OptionKind;const defaultOptions={annotationMode:{value:2,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},cursorToolOnLoad:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:OptionKind.VIEWER},defaultZoomValue:{value:"",kind:OptionKind.VIEWER+OptionKind.PREFERENCE},disableHistory:{value:!1,kind:OptionKind.VIEWER},disablePageLabels:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePermissions:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},enableScripting:{value:!0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:OptionKind.VIEWER},externalLinkTarget:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},historyUpdateUrl:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},imageResourcesPath:{value:"./images/",kind:OptionKind.VIEWER},maxCanvasPixels:{value:16777216,compatibility:compatibilityParams.maxCanvasPixels,kind:OptionKind.VIEWER},pdfBugEnabled:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},printResolution:{value:150,kind:OptionKind.VIEWER},renderer:{value:"canvas",kind:OptionKind.VIEWER},sidebarViewOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},scrollModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},spreadModeOnLoad:{value:-1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},textLayerMode:{value:1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},useOnlyCssZoom:{value:!1,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewerCssTheme:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},viewOnLoad:{value:0,kind:OptionKind.VIEWER+OptionKind.PREFERENCE},cMapPacked:{value:!0,kind:OptionKind.API},cMapUrl:{value:"../web/cmaps/",kind:OptionKind.API},disableAutoFetch:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableFontFace:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableRange:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},disableStream:{value:!1,kind:OptionKind.API+OptionKind.PREFERENCE},docBaseUrl:{value:"",kind:OptionKind.API},enableXfa:{value:!0,kind:OptionKind.API+OptionKind.PREFERENCE},fontExtraProperties:{value:!1,kind:OptionKind.API},isEvalSupported:{value:!0,kind:OptionKind.API},maxImageSize:{value:-1,kind:OptionKind.API},pdfBug:{value:!1,kind:OptionKind.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:OptionKind.API},verbosity:{value:1,kind:OptionKind.API},workerPort:{value:null,kind:OptionKind.WORKER},workerSrc:{value:"../build/pdf.worker.js?ver=00002",kind:OptionKind.WORKER}};defaultOptions.disablePreferences={value:!1,kind:OptionKind.VIEWER},defaultOptions.locale={value:navigator.language||"en-US",kind:OptionKind.VIEWER},defaultOptions.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:OptionKind.VIEWER},defaultOptions.renderer.kind+=OptionKind.PREFERENCE;const userOptions=Object.create(null);exports.AppOptions=class{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(name){const userOption=userOptions[name];if(void 0!==userOption)return userOption;const defaultOption=defaultOptions[name];var _defaultOption$compat;return void 0!==defaultOption?null!==(_defaultOption$compat=defaultOption.compatibility)&&void 0!==_defaultOption$compat?_defaultOption$compat:defaultOption.value:void 0}static getAll(){let kind=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const options=Object.create(null);for(const name in defaultOptions){var _defaultOption$compat2;const defaultOption=defaultOptions[name];if(kind){if(0==(kind&defaultOption.kind))continue;if(kind===OptionKind.PREFERENCE){const value=defaultOption.value,valueType=typeof value;if("boolean"===valueType||"string"===valueType||"number"===valueType&&Number.isInteger(value)){options[name]=value;continue}throw new Error("Invalid type for preference: ".concat(name))}}const userOption=userOptions[name];options[name]=void 0!==userOption?userOption:null!==(_defaultOption$compat2=defaultOption.compatibility)&&void 0!==_defaultOption$compat2?_defaultOption$compat2:defaultOption.value}return options}static set(name,value){userOptions[name]=value}static setAll(options){for(const name in options)userOptions[name]=options[name]}static remove(name){delete userOptions[name]}static _hasUserOptions(){return Object.keys(userOptions).length>0}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFRenderingQueue=void 0;var _pdfjsLib=__w_pdfjs_require__(3),_ui_utils=__w_pdfjs_require__(6);exports.PDFRenderingQueue=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setThumbnailViewer(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer}isHighestPriority(view){return this.highestPriorityPage===view.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(currentlyVisiblePages){var _this$pdfThumbnailVie;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(currentlyVisiblePages)||this.isThumbnailViewEnabled&&null!==(_this$pdfThumbnailVie=this.pdfThumbnailViewer)&&void 0!==_this$pdfThumbnailVie&&_this$pdfThumbnailVie.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(visible,views,scrolledDown){let preRenderExtra=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const visibleViews=visible.views,numVisible=visibleViews.length;if(0===numVisible)return null;for(let i=0;i<numVisible;i++){const view=visibleViews[i].view;if(!this.isViewFinished(view))return view}const firstId=visible.first.id,lastId=visible.last.id;if(lastId-firstId+1>numVisible){const visibleIds=visible.ids;for(let i=1,ii=lastId-firstId;i<ii;i++){const holeId=scrolledDown?firstId+i:lastId-i;if(visibleIds.has(holeId))continue;const holeView=views[holeId-1];if(!this.isViewFinished(holeView))return holeView}}let preRenderIndex=scrolledDown?lastId:firstId-2,preRenderView=views[preRenderIndex];return preRenderView&&!this.isViewFinished(preRenderView)||preRenderExtra&&(preRenderIndex+=scrolledDown?1:-1,preRenderView=views[preRenderIndex],preRenderView&&!this.isViewFinished(preRenderView))?preRenderView:null}isViewFinished(view){return view.renderingState===_ui_utils.RenderingStates.FINISHED}renderView(view){switch(view.renderingState){case _ui_utils.RenderingStates.FINISHED:return!1;case _ui_utils.RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId,view.resume();break;case _ui_utils.RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case _ui_utils.RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId,view.draw().finally((()=>{this.renderHighestPriority()})).catch((reason=>{reason instanceof _pdfjsLib.RenderingCancelledException||console.error('renderView: "'.concat(reason,'"'))}))}return!0}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextHighlighter=void 0;exports.TextHighlighter=class{constructor(_ref13){let{findController:findController,eventBus:eventBus,pageIndex:pageIndex}=_ref13;this.findController=findController,this.matches=[],this.eventBus=eventBus,this.pageIdx=pageIndex,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(divs,texts){this.textDivs=divs,this.textContentItemsStr=texts}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=evt=>{evt.pageIndex!==this.pageIdx&&-1!==evt.pageIndex||this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(matches,matchesLength){if(!matches)return[];const{textContentItemsStr:textContentItemsStr}=this;let i=0,iIndex=0;const end=textContentItemsStr.length-1,result=[];for(let m=0,mm=matches.length;m<mm;m++){let matchIdx=matches[m];for(;i!==end&&matchIdx>=iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;i===textContentItemsStr.length&&console.error("Could not find a matching mapping");const match={begin:{divIdx:i,offset:matchIdx-iIndex}};for(matchIdx+=matchesLength[m];i!==end&&matchIdx>iIndex+textContentItemsStr[i].length;)iIndex+=textContentItemsStr[i].length,i++;match.end={divIdx:i,offset:matchIdx-iIndex},result.push(match)}return result}_renderMatches(matches){if(0===matches.length)return;const{findController:findController,pageIdx:pageIdx}=this,{textContentItemsStr:textContentItemsStr,textDivs:textDivs}=this,isSelectedPage=pageIdx===findController.selected.pageIdx,selectedMatchIdx=findController.selected.matchIdx;let prevEnd=null;const infinity={divIdx:-1,offset:void 0};function beginText(begin,className){const divIdx=begin.divIdx;return textDivs[divIdx].textContent="",appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){let div=textDivs[divIdx];if(div.nodeType===Node.TEXT_NODE){const span=document.createElement("span");div.parentNode.insertBefore(span,div),span.appendChild(div),textDivs[divIdx]=span,div=span}const content=textContentItemsStr[divIdx].substring(fromOffset,toOffset),node=document.createTextNode(content);if(className){const span=document.createElement("span");return span.className="".concat(className," appended"),span.appendChild(node),div.appendChild(span),className.includes("selected")?span.offsetLeft:0}return div.appendChild(node),0}let i0=selectedMatchIdx,i1=i0+1;if(findController.state.highlightAll)i0=0,i1=matches.length;else if(!isSelectedPage)return;for(let i=i0;i<i1;i++){const match=matches[i],begin=match.begin,end=match.end,isSelected=isSelectedPage&&i===selectedMatchIdx,highlightSuffix=isSelected?" selected":"";let selectedLeft=0;if(prevEnd&&begin.divIdx===prevEnd.divIdx?appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset):(null!==prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset),beginText(begin)),begin.divIdx===end.divIdx)selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix);else{selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(let n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++)textDivs[n0].className="highlight middle"+highlightSuffix;beginText(end,"highlight end"+highlightSuffix)}prevEnd=end,isSelected&&findController.scrollMatchIntoView({element:textDivs[begin.divIdx],selectedLeft:selectedLeft,pageIndex:pageIdx,matchIndex:selectedMatchIdx})}prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}_updateMatches(){if(!this.enabled)return;const{findController:findController,matches:matches,pageIdx:pageIdx}=this,{textContentItemsStr:textContentItemsStr,textDivs:textDivs}=this;let clearedUntilDivIdx=-1;for(let i=0,ii=matches.length;i<ii;i++){const match=matches[i];for(let n=Math.max(clearedUntilDivIdx,match.begin.divIdx),end=match.end.divIdx;n<=end;n++){const div=textDivs[n];div.textContent=textContentItemsStr[n],div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(null==findController||!findController.highlightMatches)return;const pageMatches=findController.pageMatches[pageIdx]||null,pageMatchesLength=findController.pageMatchesLength[pageIdx]||null;this.matches=this._convertMatches(pageMatches,pageMatchesLength),this._renderMatches(this.matches)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.DownloadManager=void 0;var _pdfjsLib=__w_pdfjs_require__(3);function download(blobUrl,filename){const a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=blobUrl,a.target="_parent","download"in a&&(a.download=filename),(document.body||document.documentElement).appendChild(a),a.click(),a.remove()}exports.DownloadManager=class{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(url,filename){(0,_pdfjsLib.createValidAbsoluteUrl)(url,"http://example.com")?download(url+"#pdfjs.action=download",filename):console.error("downloadUrl - not a valid URL: ".concat(url))}downloadData(data,filename,contentType){download(URL.createObjectURL(new Blob([data],{type:contentType})),filename)}openOrDownloadData(element,data,filename){const isPdfData=(0,_pdfjsLib.isPdfFile)(filename),contentType=isPdfData?"application/pdf":"";if(isPdfData){let viewerUrl,blobUrl=this._openBlobUrls.get(element);blobUrl||(blobUrl=URL.createObjectURL(new Blob([data],{type:contentType})),this._openBlobUrls.set(element,blobUrl)),viewerUrl="?file="+encodeURIComponent(blobUrl+"#"+filename);try{return window.open(viewerUrl),!0}catch(ex){console.error("openOrDownloadData: ".concat(ex)),URL.revokeObjectURL(blobUrl),this._openBlobUrls.delete(element)}}return this.downloadData(data,filename,contentType),!1}download(blob,url,filename){download(URL.createObjectURL(blob),filename)}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaitOnType=exports.EventBus=exports.AutomationEventBus=void 0,exports.waitOnEventOrTimeout=function(_ref14){let{target:target,name:name,delay:delay=0}=_ref14;return new Promise((function(resolve,reject){if("object"!=typeof target||!name||"string"!=typeof name||!(Number.isInteger(delay)&&delay>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(type){target instanceof EventBus?target._off(name,eventHandler):target.removeEventListener(name,eventHandler),timeout&&clearTimeout(timeout),resolve(type)}const eventHandler=handler.bind(null,WaitOnType.EVENT);target instanceof EventBus?target._on(name,eventHandler):target.addEventListener(name,eventHandler);const timeoutHandler=handler.bind(null,WaitOnType.TIMEOUT),timeout=setTimeout(timeoutHandler,delay)}))};const WaitOnType={EVENT:"event",TIMEOUT:"timeout"};exports.WaitOnType=WaitOnType;class EventBus{constructor(){this._listeners=Object.create(null)}on(eventName,listener){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(eventName,listener,{external:!0,once:null==options?void 0:options.once})}off(eventName,listener){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(eventName,listener,{external:!0,once:null==options?void 0:options.once})}dispatch(eventName,data){const eventListeners=this._listeners[eventName];if(!eventListeners||0===eventListeners.length)return;let externalListeners;for(const{listener:listener,external:external,once:once}of eventListeners.slice(0))once&&this._off(eventName,listener),external?(externalListeners||(externalListeners=[])).push(listener):listener(data);if(externalListeners){for(const listener of externalListeners)listener(data);externalListeners=null}}_on(eventName,listener){var _this$_listeners;let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;((_this$_listeners=this._listeners)[eventName]||(_this$_listeners[eventName]=[])).push({listener:listener,external:!0===(null==options?void 0:options.external),once:!0===(null==options?void 0:options.once)})}_off(eventName,listener){const eventListeners=this._listeners[eventName];if(eventListeners)for(let i=0,ii=eventListeners.length;i<ii;i++)if(eventListeners[i].listener===listener)return void eventListeners.splice(i,1)}}exports.EventBus=EventBus;exports.AutomationEventBus=class extends EventBus{dispatch(eventName,data){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericL10n=void 0,__w_pdfjs_require__(19);var _l10n_utils=__w_pdfjs_require__(4);const webL10n=document.webL10n;exports.GenericL10n=class{constructor(lang){this._lang=lang,this._ready=new Promise(((resolve,reject)=>{webL10n.setLanguage((0,_l10n_utils.fixupLangCode)(lang),(()=>{resolve(webL10n)}))}))}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(key){let args=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,fallback=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,_l10n_utils.getL10nFallback)(key,args);return(await this._ready).get(key,args,fallback)}async translate(element){return(await this._ready).translate(element)}}},()=>{document.webL10n=function(window,document,undefined$1){var gL10nData={},gTextData="",gTextProp="textContent",gLanguage="",gMacros={},gReadyState="loading";function xhrLoadText(url,onSuccess,onFailure){onSuccess=onSuccess||function(data){},onFailure=onFailure||function(){};var xhr=new XMLHttpRequest;xhr.open("GET",url,true),xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=utf-8"),xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||0===xhr.status?onSuccess(xhr.responseText):onFailure())},xhr.onerror=onFailure,xhr.ontimeout=onFailure;try{xhr.send(null)}catch(e){onFailure()}}function parseResource(href,lang,successCallback,failureCallback){var baseURL=href.replace(/[^\/]*$/,"")||"./";function evalString(text){return text.lastIndexOf("\\")<0?text:text.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(href,(function(response){gTextData+=response,function(text,parsedPropertiesCallback){var dictionary={},reBlank=/^\s*|\s*$/,reComment=/^\s*#|^\s*$/,reSection=/^\s*\[(.*)\]\s*$/,reImport=/^\s*@import\s+url\((.*)\)\s*$/i,reSplit=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(rawText,extendedSyntax,parsedRawLinesCallback){var entries=rawText.replace(reBlank,"").split(/[\r\n]+/),currentLang="*",genericLang=lang.split("-",1)[0],skipLang=!1,match="";!function nextEntry(){for(;;){if(!entries.length)return void parsedRawLinesCallback();var line=entries.shift();if(!reComment.test(line)){if(extendedSyntax){if(match=reSection.exec(line)){currentLang=match[1].toLowerCase(),skipLang="*"!==currentLang&&currentLang!==lang&&currentLang!==genericLang;continue}if(skipLang)continue;if(match=reImport.exec(line))return void loadImport(baseURL+match[1],nextEntry)}var tmp=line.match(reSplit);tmp&&3==tmp.length&&(dictionary[tmp[1]]=evalString(tmp[2]))}}}()}function loadImport(url,callback){xhrLoadText(url,(function(content){parseRawLines(content,!1,callback)}),(function(){console.warn(url+" not found."),callback()}))}parseRawLines(text,!0,(function(){parsedPropertiesCallback(dictionary)}))}(response,(function(data){for(var key in data){var id,prop,index=key.lastIndexOf(".");index>0?(id=key.substring(0,index),prop=key.substring(index+1)):(id=key,prop=gTextProp),gL10nData[id]||(gL10nData[id]={}),gL10nData[id][prop]=data[key]}successCallback&&successCallback()}))}),failureCallback)}function loadLocale(lang,callback){lang&&(lang=lang.toLowerCase()),callback=callback||function(){},gL10nData={},gTextData="",gLanguage="",gLanguage=lang;var langLinks=document.querySelectorAll('link[type="application/l10n"]'),langCount=langLinks.length;if(0!==langCount){var script,onResourceLoaded,gResourceCount=0;onResourceLoaded=function(){++gResourceCount>=langCount&&(callback(),gReadyState="complete")};for(var i=0;i<langCount;i++){new L10nResourceLink(langLinks[i]).load(lang,onResourceLoaded)}}else{var dict=(script=document.querySelector('script[type="application/l10n"]'))?JSON.parse(script.innerHTML):null;if(dict&&dict.locales&&dict.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(gL10nData=dict.locales[lang])){var defaultLocale=dict.default_locale.toLowerCase();for(var anyCaseLang in dict.locales){if((anyCaseLang=anyCaseLang.toLowerCase())===lang){gL10nData=dict.locales[lang];break}anyCaseLang===defaultLocale&&(gL10nData=dict.locales[defaultLocale])}}callback()}else console.log("no resource to load, early way out");gReadyState="complete"}function L10nResourceLink(link){var href=link.href;this.load=function(lang,callback){parseResource(href,lang,callback,(function(){console.warn(href+" not found."),console.warn('"'+lang+'" resource not found'),gLanguage="",callback()}))}}}function getL10nData(key,args,fallback){var data=gL10nData[key];if(!data){if(console.warn("#"+key+" is undefined."),!fallback)return null;data=fallback}var rv={};for(var prop in data){var str=data[prop];str=substArguments(str=substIndexes(str,args,key,prop),args,key),rv[prop]=str}return rv}function substIndexes(str,args,key,prop){var reMatch=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(str);if(!reMatch||!reMatch.length)return str;var param,macroName=reMatch[1],paramName=reMatch[2];(args&&paramName in args?param=args[paramName]:paramName in gL10nData&&(param=gL10nData[paramName]),macroName in gMacros)&&(str=(0,gMacros[macroName])(str,param,key,prop));return str}function substArguments(str,args,key){return str.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(matched_text,arg){return args&&arg in args?args[arg]:arg in gL10nData?gL10nData[arg]:(console.log("argument {{"+arg+"}} for #"+key+" is undefined."),matched_text)}))}function translateElement(element){var l10n=function(element){if(!element)return{};var l10nId=element.getAttribute("data-l10n-id"),l10nArgs=element.getAttribute("data-l10n-args"),args={};if(l10nArgs)try{args=JSON.parse(l10nArgs)}catch(e){console.warn("could not parse arguments for #"+l10nId)}return{id:l10nId,args:args}}(element);if(l10n.id){var data=getL10nData(l10n.id,l10n.args);if(data){if(data[gTextProp]){if(0===function(element){if(element.children)return element.children.length;if(void 0!==element.childElementCount)return element.childElementCount;for(var count=0,i=0;i<element.childNodes.length;i++)count+=1===element.nodeType?1:0;return count}(element))element[gTextProp]=data[gTextProp];else{for(var children=element.childNodes,found=!1,i=0,l=children.length;i<l;i++)3===children[i].nodeType&&/\S/.test(children[i].nodeValue)&&(found?children[i].nodeValue="":(children[i].nodeValue=data[gTextProp],found=!0));if(!found){var textNode=document.createTextNode(data[gTextProp]);element.insertBefore(textNode,element.firstChild)}}delete data[gTextProp]}for(var k in data)element[k]=data[k]}else console.warn("#"+l10n.id+" is undefined.")}}return gMacros.plural=function(str,param,key,prop){var n=parseFloat(param);if(isNaN(n))return str;if(prop!=gTextProp)return str;gMacros._pluralRules||(gMacros._pluralRules=function(lang){function isIn(n,list){return-1!==list.indexOf(n)}function isBetween(n,start,end){return start<=n&&n<=end}var pluralRules={0:function(n){return"other"},1:function(n){return isBetween(n%100,3,10)?"few":0===n?"zero":isBetween(n%100,11,99)?"many":2==n?"two":1==n?"one":"other"},2:function(n){return 0!==n&&n%10==0?"many":2==n?"two":1==n?"one":"other"},3:function(n){return 1==n?"one":"other"},4:function(n){return isBetween(n,0,1)?"one":"other"},5:function(n){return isBetween(n,0,2)&&2!=n?"one":"other"},6:function(n){return 0===n?"zero":n%10==1&&n%100!=11?"one":"other"},7:function(n){return 2==n?"two":1==n?"one":"other"},8:function(n){return isBetween(n,3,6)?"few":isBetween(n,7,10)?"many":2==n?"two":1==n?"one":"other"},9:function(n){return 0===n||1!=n&&isBetween(n%100,1,19)?"few":1==n?"one":"other"},10:function(n){return isBetween(n%10,2,9)&&!isBetween(n%100,11,19)?"few":n%10!=1||isBetween(n%100,11,19)?"other":"one"},11:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":n%10==0||isBetween(n%10,5,9)||isBetween(n%100,11,14)?"many":n%10==1&&n%100!=11?"one":"other"},12:function(n){return isBetween(n,2,4)?"few":1==n?"one":"other"},13:function(n){return isBetween(n%10,2,4)&&!isBetween(n%100,12,14)?"few":1!=n&&isBetween(n%10,0,1)||isBetween(n%10,5,9)||isBetween(n%100,12,14)?"many":1==n?"one":"other"},14:function(n){return isBetween(n%100,3,4)?"few":n%100==2?"two":n%100==1?"one":"other"},15:function(n){return 0===n||isBetween(n%100,2,10)?"few":isBetween(n%100,11,19)?"many":1==n?"one":"other"},16:function(n){return n%10==1&&11!=n?"one":"other"},17:function(n){return 3==n?"few":0===n?"zero":6==n?"many":2==n?"two":1==n?"one":"other"},18:function(n){return 0===n?"zero":isBetween(n,0,2)&&0!==n&&2!=n?"one":"other"},19:function(n){return isBetween(n,2,10)?"few":isBetween(n,0,1)?"one":"other"},20:function(n){return!isBetween(n%10,3,4)&&n%10!=9||isBetween(n%100,10,19)||isBetween(n%100,70,79)||isBetween(n%100,90,99)?n%1e6==0&&0!==n?"many":n%10!=2||isIn(n%100,[12,72,92])?n%10!=1||isIn(n%100,[11,71,91])?"other":"one":"two":"few"},21:function(n){return 0===n?"zero":1==n?"one":"other"},22:function(n){return isBetween(n,0,1)||isBetween(n,11,99)?"one":"other"},23:function(n){return isBetween(n%10,1,2)||n%20==0?"one":"other"},24:function(n){return isBetween(n,3,10)||isBetween(n,13,19)?"few":isIn(n,[2,12])?"two":isIn(n,[1,11])?"one":"other"}},index={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[lang.replace(/-.*$/,"")];return index in pluralRules?pluralRules[index]:(console.warn("plural form unknown for ["+lang+"]"),function(){return"other"})}(gLanguage));var index="["+gMacros._pluralRules(n)+"]";return 0===n&&key+"[zero]"in gL10nData?str=gL10nData[key+"[zero]"][prop]:1==n&&key+"[one]"in gL10nData?str=gL10nData[key+"[one]"][prop]:2==n&&key+"[two]"in gL10nData?str=gL10nData[key+"[two]"][prop]:key+index in gL10nData?str=gL10nData[key+index][prop]:key+"[other]"in gL10nData&&(str=gL10nData[key+"[other]"][prop]),str},{get:function(key,args,fallbackString){var fallback,index=key.lastIndexOf("."),prop=gTextProp;index>0&&(prop=key.substring(index+1),key=key.substring(0,index)),fallbackString&&((fallback={})[prop]=fallbackString);var data=getL10nData(key,args,fallback);return data&&prop in data?data[prop]:"{{"+key+"}}"},getData:function(){return gL10nData},getText:function(){return gTextData},getLanguage:function(){return gLanguage},setLanguage:function(lang,callback){loadLocale(lang,(function(){callback&&callback()}))},getDirection:function(){var shortCode=gLanguage.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(shortCode)>=0?"rtl":"ltr"},translate:function(element){for(var children=function(element){return element?element.querySelectorAll("*[data-l10n-id]"):[]}(element=element||document.documentElement),elementCount=children.length,i=0;i<elementCount;i++)translateElement(children[i]);translateElement(element)},getReadyState:function(){return gReadyState},ready:function(callback){callback&&("complete"==gReadyState||"interactive"==gReadyState?window.setTimeout((function(){callback()})):document.addEventListener&&document.addEventListener("localized",(function once(){document.removeEventListener("localized",once),callback()})))}}}(window,document)},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFFindController=exports.FindState=void 0;var _ui_utils=__w_pdfjs_require__(6),_pdfjsLib=__w_pdfjs_require__(3),_pdf_find_utils=__w_pdfjs_require__(21);const FindState={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};exports.FindState=FindState;const CHARACTERS_TO_NORMALIZE={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},DIACRITICS_EXCEPTION=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),DIACRITICS_EXCEPTION_STR=[...DIACRITICS_EXCEPTION.values()].map((x=>String.fromCharCode(x))).join(""),DIACRITICS_REG_EXP=/\p{M}+/gu,SPECIAL_CHARS_REG_EXP=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,NOT_DIACRITIC_FROM_END_REG_EXP=/([^\p{M}])\p{M}*$/u,NOT_DIACRITIC_FROM_START_REG_EXP=/^\p{M}*([^\p{M}])/u;let normalizationRegex=null;function normalize(text){if(!normalizationRegex){const replace=Object.keys(CHARACTERS_TO_NORMALIZE).join("");normalizationRegex=new RegExp("([".concat(replace,"])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)"),"gum")}const rawDiacriticsPositions=[];let m;for(;null!==(m=DIACRITICS_REG_EXP.exec(text));)rawDiacriticsPositions.push([m[0].length,m.index]);let normalized=text.normalize("NFD");const positions=[[0,0]];let k=0,shift=0,shiftOrigin=0,eol=0,hasDiacritics=!1;return normalized=normalized.replace(normalizationRegex,((match,p1,p2,p3,p4,i)=>{if(i-=shiftOrigin,p1){const replacement=CHARACTERS_TO_NORMALIZE[match],jj=replacement.length;for(let j=1;j<jj;j++)positions.push([i-shift+j,shift-j]);return shift-=jj-1,replacement}if(p2){var _rawDiacriticsPositio;const hasTrailingDashEOL=p2.endsWith("\n"),len=hasTrailingDashEOL?p2.length-2:p2.length;hasDiacritics=!0;let jj=len;i+eol===(null===(_rawDiacriticsPositio=rawDiacriticsPositions[k])||void 0===_rawDiacriticsPositio?void 0:_rawDiacriticsPositio[1])&&(jj-=rawDiacriticsPositions[k][0],++k);for(let j=1;j<jj+1;j++)positions.push([i-1-shift+j,shift-j]);return shift-=jj,shiftOrigin+=jj,hasTrailingDashEOL?(i+=len-1,positions.push([i-shift+1,1+shift]),shift+=1,shiftOrigin+=1,eol+=1,p2.slice(0,len)):p2}return p3?(positions.push([i-shift+1,1+shift]),shift+=1,shiftOrigin+=1,eol+=1,p3.charAt(0)):(positions.push([i-shift+1,shift-1]),shift-=1,shiftOrigin+=1,eol+=1," ")})),positions.push([normalized.length,shift]),[normalized,positions,hasDiacritics]}function getOriginalIndex(diffs,pos,len){if(!diffs)return[pos,len];const start=pos,end=pos+len;let i=(0,_ui_utils.binarySearchFirstItem)(diffs,(x=>x[0]>=start));diffs[i][0]>start&&--i;let j=(0,_ui_utils.binarySearchFirstItem)(diffs,(x=>x[0]>=end),i);return diffs[j][0]>end&&--j,[start+diffs[i][1],len+diffs[j][1]-diffs[i][1]]}var _onFind=new WeakSet,_onFindBarClose=new WeakSet;function _onFind2(state){if(!state)return;const pdfDocument=this._pdfDocument,{type:type}=state;(null===this._state||this._shouldDirtyMatch(state))&&(this._dirtyMatch=!0),this._state=state,"highlightallchange"!==type&&this._updateUIState(FindState.PENDING),this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||pdfDocument&&this._pdfDocument!==pdfDocument)return;this._extractText();const findbarClosed=!this._highlightMatches,pendingTimeout=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),type?this._dirtyMatch?this._nextMatch():"again"===type?(this._nextMatch(),findbarClosed&&this._state.highlightAll&&this._updateAllPages()):"highlightallchange"===type?(pendingTimeout?this._nextMatch():this._highlightMatches=!0,this._updateAllPages()):this._nextMatch():this._findTimeout=setTimeout((()=>{this._nextMatch(),this._findTimeout=null}),250)}))}function _onFindBarClose2(evt){const pdfDocument=this._pdfDocument;this._firstPageCapability.promise.then((()=>{!this._pdfDocument||pdfDocument&&this._pdfDocument!==pdfDocument||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this._updateUIState(FindState.FOUND),this._highlightMatches=!1,this._updateAllPages())}))}exports.PDFFindController=class{constructor(_ref15){let{linkService:linkService,eventBus:eventBus}=_ref15;_classPrivateMethodInitSpec(this,_onFindBarClose),_classPrivateMethodInitSpec(this,_onFind),this._linkService=linkService,this._eventBus=eventBus,this._reset(),eventBus._on("find",_classPrivateMethodGet(this,_onFind,_onFind2).bind(this)),eventBus._on("findbarclose",_classPrivateMethodGet(this,_onFindBarClose,_onFindBarClose2).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(pdfDocument){this._pdfDocument&&this._reset(),pdfDocument&&(this._pdfDocument=pdfDocument,this._firstPageCapability.resolve())}scrollMatchIntoView(_ref16){let{element:element=null,selectedLeft:selectedLeft=0,pageIndex:pageIndex=-1,matchIndex:matchIndex=-1}=_ref16;if(!this._scrollMatches||!element)return;if(-1===matchIndex||matchIndex!==this._selected.matchIdx)return;if(-1===pageIndex||pageIndex!==this._selected.pageIdx)return;this._scrollMatches=!1;const spot={top:-50,left:selectedLeft+-400};(0,_ui_utils.scrollIntoView)(element,spot,!0)}_reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,_pdfjsLib.createPromiseCapability)()}get _query(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=normalize(this._state.query)),this._normalizedQuery}_shouldDirtyMatch(state){if(state.query!==this._state.query)return!0;switch(state.type){case"again":const pageNumber=this._selected.pageIdx+1,linkService=this._linkService;return pageNumber>=1&&pageNumber<=linkService.pagesCount&&pageNumber!==linkService.page&&!linkService.isPageVisible(pageNumber);case"highlightallchange":return!1}return!0}_isEntireWord(content,startIdx,length){let match=content.slice(0,startIdx).match(NOT_DIACRITIC_FROM_END_REG_EXP);if(match){const first=content.charCodeAt(startIdx),limit=match[1].charCodeAt(0);if((0,_pdf_find_utils.getCharacterType)(first)===(0,_pdf_find_utils.getCharacterType)(limit))return!1}if(match=content.slice(startIdx+length).match(NOT_DIACRITIC_FROM_START_REG_EXP),match){const last=content.charCodeAt(startIdx+length-1),limit=match[1].charCodeAt(0);if((0,_pdf_find_utils.getCharacterType)(last)===(0,_pdf_find_utils.getCharacterType)(limit))return!1}return!0}_calculateRegExpMatch(query,entireWord,pageIndex,pageContent){const matches=[],matchesLength=[],diffs=this._pageDiffs[pageIndex];let match;for(;null!==(match=query.exec(pageContent));){if(entireWord&&!this._isEntireWord(pageContent,match.index,match[0].length))continue;const[matchPos,matchLen]=getOriginalIndex(diffs,match.index,match[0].length);matchLen&&(matches.push(matchPos),matchesLength.push(matchLen))}this._pageMatches[pageIndex]=matches,this._pageMatchesLength[pageIndex]=matchesLength}_convertToRegExpString(query,hasDiacritics){const{matchDiacritics:matchDiacritics}=this._state;let isUnicode=!1;return(query=query.replace(SPECIAL_CHARS_REG_EXP,((match,p1,p2,p3,p4,p5)=>p1?"[ ]*\\".concat(p1,"[ ]*"):p2?"[ ]*".concat(p2,"[ ]*"):p3?"[ ]+":matchDiacritics?p4||p5:p4?DIACRITICS_EXCEPTION.has(p4.charCodeAt(0))?p4:"":hasDiacritics?(isUnicode=!0,"".concat(p5,"\\p{M}*")):p5))).endsWith("[ ]*")&&(query=query.slice(0,query.length-"[ ]*".length)),matchDiacritics&&hasDiacritics&&(isUnicode=!0,query="".concat(query,"(?=[").concat(DIACRITICS_EXCEPTION_STR,"]|[^\\p{M}]|$)")),[isUnicode,query]}_calculateMatch(pageIndex){let query=this._query;if(0===query.length)return;const{caseSensitive:caseSensitive,entireWord:entireWord,phraseSearch:phraseSearch}=this._state,pageContent=this._pageContents[pageIndex],hasDiacritics=this._hasDiacritics[pageIndex];let isUnicode=!1;if(phraseSearch)[isUnicode,query]=this._convertToRegExpString(query,hasDiacritics);else{const match=query.match(/\S+/g);match&&(query=match.sort().reverse().map((q=>{const[isUnicodePart,queryPart]=this._convertToRegExpString(q,hasDiacritics);return isUnicode||(isUnicode=isUnicodePart),"(".concat(queryPart,")")})).join("|"))}const flags="g".concat(isUnicode?"u":"").concat(caseSensitive?"":"i");query=new RegExp(query,flags),this._calculateRegExpMatch(query,entireWord,pageIndex,pageContent),this._state.highlightAll&&this._updatePage(pageIndex),this._resumePageIdx===pageIndex&&(this._resumePageIdx=null,this._nextPageMatch());const pageMatchesCount=this._pageMatches[pageIndex].length;pageMatchesCount>0&&(this._matchesCountTotal+=pageMatchesCount,this._updateUIResultsCount())}_extractText(){if(this._extractTextPromises.length>0)return;let promise=Promise.resolve();for(let i=0,ii=this._linkService.pagesCount;i<ii;i++){const extractTextCapability=(0,_pdfjsLib.createPromiseCapability)();this._extractTextPromises[i]=extractTextCapability.promise,promise=promise.then((()=>this._pdfDocument.getPage(i+1).then((pdfPage=>pdfPage.getTextContent())).then((textContent=>{const textItems=textContent.items,strBuf=[];for(let j=0,jj=textItems.length;j<jj;j++)strBuf.push(textItems[j].str),textItems[j].hasEOL&&strBuf.push("\n");[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=normalize(strBuf.join("")),extractTextCapability.resolve(i)}),(reason=>{console.error("Unable to get text content for page ".concat(i+1),reason),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,extractTextCapability.resolve(i)}))))}}_updatePage(index){this._scrollMatches&&this._selected.pageIdx===index&&(this._linkService.page=index+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:index})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const previous=this._state.findPrevious,currentPageIndex=this._linkService.page-1,numPages=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=currentPageIndex,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(let i=0;i<numPages;i++)this._pendingFindMatches.has(i)||(this._pendingFindMatches.add(i),this._extractTextPromises[i].then((pageIdx=>{this._pendingFindMatches.delete(pageIdx),this._calculateMatch(pageIdx)})))}if(""===this._query)return void this._updateUIState(FindState.FOUND);if(this._resumePageIdx)return;const offset=this._offset;if(this._pagesToSearch=numPages,null!==offset.matchIdx){const numPageMatches=this._pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0)return offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(previous)}this._nextPageMatch()}_matchesReady(matches){const offset=this._offset,numMatches=matches.length,previous=this._state.findPrevious;return numMatches?(offset.matchIdx=previous?numMatches-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(previous),!!(offset.wrapped&&(offset.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}_nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let matches=null;do{const pageIdx=this._offset.pageIdx;if(matches=this._pageMatches[pageIdx],!matches){this._resumePageIdx=pageIdx;break}}while(!this._matchesReady(matches))}_advanceOffsetPage(previous){const offset=this._offset,numPages=this._linkService.pagesCount;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1,offset.matchIdx=null,this._pagesToSearch--,(offset.pageIdx>=numPages||offset.pageIdx<0)&&(offset.pageIdx=previous?numPages-1:0,offset.wrapped=!0)}_updateMatch(){let found=arguments.length>0&&void 0!==arguments[0]&&arguments[0],state=FindState.NOT_FOUND;const wrapped=this._offset.wrapped;if(this._offset.wrapped=!1,found){const previousPage=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,state=wrapped?FindState.WRAPPED:FindState.FOUND,-1!==previousPage&&previousPage!==this._selected.pageIdx&&this._updatePage(previousPage)}this._updateUIState(state,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}_requestMatchesCount(){const{pageIdx:pageIdx,matchIdx:matchIdx}=this._selected;let current=0,total=this._matchesCountTotal;if(-1!==matchIdx){for(let i=0;i<pageIdx;i++){var _this$_pageMatches$i;current+=(null===(_this$_pageMatches$i=this._pageMatches[i])||void 0===_this$_pageMatches$i?void 0:_this$_pageMatches$i.length)||0}current+=matchIdx+1}return(current<1||current>total)&&(current=total=0),{current:current,total:total}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(state){var _this$_state$query,_this$_state;let previous=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:state,previous:previous,matchesCount:this._requestMatchesCount(),rawQuery:null!==(_this$_state$query=null===(_this$_state=this._state)||void 0===_this$_state?void 0:_this$_state.query)&&void 0!==_this$_state$query?_this$_state$query:null})}}},(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CharacterType=void 0,exports.getCharacterType=function(charCode){if(function(charCode){return charCode<11904}(charCode))return function(charCode){return 0==(65408&charCode)}(charCode)?function(charCode){return 32===charCode||9===charCode||13===charCode||10===charCode}(charCode)?CharacterType.SPACE:function(charCode){return charCode>=97&&charCode<=122||charCode>=65&&charCode<=90}(charCode)||function(charCode){return charCode>=48&&charCode<=57}(charCode)||95===charCode?CharacterType.ALPHA_LETTER:CharacterType.PUNCT:function(charCode){return 3584==(65408&charCode)}(charCode)?CharacterType.THAI_LETTER:160===charCode?CharacterType.SPACE:CharacterType.ALPHA_LETTER;if(function(charCode){return charCode>=13312&&charCode<=40959||charCode>=63744&&charCode<=64255}(charCode))return CharacterType.HAN_LETTER;if(function(charCode){return charCode>=12448&&charCode<=12543}(charCode))return CharacterType.KATAKANA_LETTER;if(function(charCode){return charCode>=12352&&charCode<=12447}(charCode))return CharacterType.HIRAGANA_LETTER;if(function(charCode){return charCode>=65376&&charCode<=65439}(charCode))return CharacterType.HALFWIDTH_KATAKANA_LETTER;return CharacterType.ALPHA_LETTER};const CharacterType={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};exports.CharacterType=CharacterType},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFHistory=void 0,exports.isDestArraysEqual=isDestArraysEqual,exports.isDestHashesEqual=isDestHashesEqual;var _ui_utils=__w_pdfjs_require__(6),_event_utils=__w_pdfjs_require__(17);function getCurrentHash(){return document.location.hash}function isDestHashesEqual(destHash,pushHash){if("string"!=typeof destHash||"string"!=typeof pushHash)return!1;if(destHash===pushHash)return!0;return(0,_ui_utils.parseQueryString)(destHash).get("nameddest")===pushHash}function isDestArraysEqual(firstDest,secondDest){function isEntryEqual(first,second){if(typeof first!=typeof second)return!1;if(Array.isArray(first)||Array.isArray(second))return!1;if(null!==first&&"object"==typeof first&&null!==second){if(Object.keys(first).length!==Object.keys(second).length)return!1;for(const key in first)if(!isEntryEqual(first[key],second[key]))return!1;return!0}return first===second||Number.isNaN(first)&&Number.isNaN(second)}if(!Array.isArray(firstDest)||!Array.isArray(secondDest))return!1;if(firstDest.length!==secondDest.length)return!1;for(let i=0,ii=firstDest.length;i<ii;i++)if(!isEntryEqual(firstDest[i],secondDest[i]))return!1;return!0}exports.PDFHistory=class{constructor(_ref17){let{linkService:linkService,eventBus:eventBus}=_ref17;this.linkService=linkService,this.eventBus=eventBus,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",(evt=>{this._isViewerInPresentationMode=evt.state!==_ui_utils.PresentationModeState.NORMAL})),this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",(evt=>{this._isPagesLoaded=!!evt.pagesCount}),{once:!0})}))}initialize(_ref18){let{fingerprint:fingerprint,resetHistory:resetHistory=!1,updateUrl:updateUrl=!1}=_ref18;if(!fingerprint||"string"!=typeof fingerprint)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const reInitialized=""!==this._fingerprint&&this._fingerprint!==fingerprint;this._fingerprint=fingerprint,this._updateUrl=!0===updateUrl,this._initialized=!0,this._bindEvents();const state=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=getCurrentHash(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(state,!0)||resetHistory){const{hash:hash,page:page,rotation:rotation}=this._parseCurrentHash(!0);return!hash||reInitialized||resetHistory?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:hash,page:page,rotation:rotation},!0)}const destination=state.destination;this._updateInternalState(destination,state.uid,!0),void 0!==destination.rotation&&(this._initialRotation=destination.rotation),destination.dest?(this._initialBookmark=JSON.stringify(destination.dest),this._destination.page=null):destination.hash?this._initialBookmark=destination.hash:destination.page&&(this._initialBookmark="page=".concat(destination.page))}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push(_ref19){let{namedDest:namedDest=null,explicitDest:explicitDest,pageNumber:pageNumber}=_ref19;if(!this._initialized)return;if(namedDest&&"string"!=typeof namedDest)return void console.error("PDFHistory.push: "+'"'.concat(namedDest,'" is not a valid namedDest parameter.'));if(!Array.isArray(explicitDest))return void console.error("PDFHistory.push: "+'"'.concat(explicitDest,'" is not a valid explicitDest parameter.'));if(!this._isValidPage(pageNumber)&&(null!==pageNumber||this._destination))return void console.error("PDFHistory.push: "+'"'.concat(pageNumber,'" is not a valid pageNumber parameter.'));const hash=namedDest||JSON.stringify(explicitDest);if(!hash)return;let forceReplace=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,hash)||isDestArraysEqual(this._destination.dest,explicitDest))){if(this._destination.page)return;forceReplace=!0}this._popStateInProgress&&!forceReplace||(this._pushOrReplaceState({dest:explicitDest,hash:hash,page:pageNumber,rotation:this.linkService.rotation},forceReplace),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))}pushPage(pageNumber){var _this$_destination;this._initialized&&(this._isValidPage(pageNumber)?(null===(_this$_destination=this._destination)||void 0===_this$_destination?void 0:_this$_destination.page)!==pageNumber&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:"page=".concat(pageNumber),page:pageNumber,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))):console.error('PDFHistory.pushPage: "'.concat(pageNumber,'" is not a valid page number.')))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const state=window.history.state;this._isValidState(state)&&state.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const state=window.history.state;this._isValidState(state)&&state.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(destination){const shouldReplace=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,newState={fingerprint:this._fingerprint,uid:shouldReplace?this._uid:this._uid+1,destination:destination};let newUrl;if(this._updateInternalState(destination,newState.uid),this._updateUrl&&null!=destination&&destination.hash){const baseUrl=document.location.href.split("#")[0];baseUrl.startsWith("file://")||(newUrl="".concat(baseUrl,"#").concat(destination.hash))}shouldReplace?window.history.replaceState(newState,"",newUrl):window.history.pushState(newState,"",newUrl)}_tryPushCurrentPosition(){let temporary=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._position)return;let position=this._position;if(temporary&&(position=Object.assign(Object.create(null),this._position),position.temporary=!0),!this._destination)return void this._pushOrReplaceState(position);if(this._destination.temporary)return void this._pushOrReplaceState(position,!0);if(this._destination.hash===position.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let forceReplace=!1;if(this._destination.page>=position.first&&this._destination.page<=position.page){if(void 0!==this._destination.dest||!this._destination.first)return;forceReplace=!0}this._pushOrReplaceState(position,forceReplace)}_isValidPage(val){return Number.isInteger(val)&&val>0&&val<=this.linkService.pagesCount}_isValidState(state){let checkReload=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!state)return!1;if(state.fingerprint!==this._fingerprint){if(!checkReload)return!1;{if("string"!=typeof state.fingerprint||state.fingerprint.length!==this._fingerprint.length)return!1;const[perfEntry]=performance.getEntriesByType("navigation");if("reload"!==(null==perfEntry?void 0:perfEntry.type))return!1}}return!(!Number.isInteger(state.uid)||state.uid<0)&&(null!==state.destination&&"object"==typeof state.destination)}_updateInternalState(destination,uid){let removeTemporary=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),removeTemporary&&null!=destination&&destination.temporary&&delete destination.temporary,this._destination=destination,this._uid=uid,this._maxUid=Math.max(this._maxUid,uid),this._numPositionUpdates=0}_parseCurrentHash(){let checkNameddest=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const hash=unescape(getCurrentHash()).substring(1),params=(0,_ui_utils.parseQueryString)(hash),nameddest=params.get("nameddest")||"";let page=0|params.get("page");return(!this._isValidPage(page)||checkNameddest&&nameddest.length>0)&&(page=null),{hash:hash,page:page,rotation:this.linkService.rotation}}_updateViewarea(_ref20){let{location:location}=_ref20;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page=".concat(location.pageNumber):location.pdfOpenParams.substring(1),page:this.linkService.page,first:location.pageNumber,rotation:location.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null}),1e3))}_popState(_ref21){let{state:state}=_ref21;const newHash=getCurrentHash(),hashChanged=this._currentHash!==newHash;if(this._currentHash=newHash,!state){this._uid++;const{hash:hash,page:page,rotation:rotation}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:hash,page:page,rotation:rotation},!0)}if(!this._isValidState(state))return;this._popStateInProgress=!0,hashChanged&&(this._blockHashChange++,(0,_event_utils.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--})));const destination=state.destination;this._updateInternalState(destination,state.uid,!0),(0,_ui_utils.isValidRotation)(destination.rotation)&&(this.linkService.rotation=destination.rotation),destination.dest?this.linkService.goToDestination(destination.dest):destination.hash?this.linkService.setHash(destination.hash):destination.page&&(this.linkService.page=destination.page),Promise.resolve().then((()=>{this._popStateInProgress=!1}))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFScriptingManager=void 0;var _ui_utils=__w_pdfjs_require__(6),_pdfjsLib=__w_pdfjs_require__(3);exports.PDFScriptingManager=class{constructor(_ref22){let{eventBus:eventBus,sandboxBundleSrc:sandboxBundleSrc=null,scriptingFactory:scriptingFactory=null,docPropertiesLookup:docPropertiesLookup=null}=_ref22;this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=eventBus,this._sandboxBundleSrc=sandboxBundleSrc,this._scriptingFactory=scriptingFactory,this._docPropertiesLookup=docPropertiesLookup,this._scriptingFactory||window.addEventListener("updatefromsandbox",(event=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:event.detail})}))}setViewer(pdfViewer){this._pdfViewer=pdfViewer}async setDocument(pdfDocument){var _this$_scripting3;if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=pdfDocument,!pdfDocument)return;const[objects,calculationOrder,docActions]=await Promise.all([pdfDocument.getFieldObjects(),pdfDocument.getCalculationOrderIds(),pdfDocument.getJSActions()]);if(objects||docActions){if(pdfDocument===this._pdfDocument){try{this._scripting=this._createScripting()}catch(error){return console.error('PDFScriptingManager.setDocument: "'.concat(null==error?void 0:error.message,'".')),void await this._destroyScripting()}this._internalEvents.set("updatefromsandbox",(event=>{(null==event?void 0:event.source)===window&&this._updateFromSandbox(event.detail)})),this._internalEvents.set("dispatcheventinsandbox",(event=>{var _this$_scripting;null===(_this$_scripting=this._scripting)||void 0===_this$_scripting||_this$_scripting.dispatchEventInSandbox(event.detail)})),this._internalEvents.set("pagechanging",(_ref23=>{let{pageNumber:pageNumber,previous:previous}=_ref23;pageNumber!==previous&&(this._dispatchPageClose(previous),this._dispatchPageOpen(pageNumber))})),this._internalEvents.set("pagerendered",(_ref24=>{let{pageNumber:pageNumber}=_ref24;this._pageOpenPending.has(pageNumber)&&pageNumber===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(pageNumber)})),this._internalEvents.set("pagesdestroy",(async event=>{var _this$_scripting2,_this$_closeCapabilit;await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await(null===(_this$_scripting2=this._scripting)||void 0===_this$_scripting2?void 0:_this$_scripting2.dispatchEventInSandbox({id:"doc",name:"WillClose"})),null===(_this$_closeCapabilit=this._closeCapability)||void 0===_this$_closeCapabilit||_this$_closeCapabilit.resolve()})),this._domEvents.set("mousedown",(event=>{this._mouseState.isDown=!0})),this._domEvents.set("mouseup",(event=>{this._mouseState.isDown=!1}));for(const[name,listener]of this._internalEvents)this._eventBus._on(name,listener);for(const[name,listener]of this._domEvents)window.addEventListener(name,listener);try{const docProperties=await this._getDocProperties();if(pdfDocument!==this._pdfDocument)return;await this._scripting.createSandbox({objects:objects,calculationOrder:calculationOrder,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...docProperties,actions:docActions}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(error){return console.error('PDFScriptingManager.setDocument: "'.concat(null==error?void 0:error.message,'".')),void await this._destroyScripting()}await(null===(_this$_scripting3=this._scripting)||void 0===_this$_scripting3?void 0:_this$_scripting3.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then((()=>{pdfDocument===this._pdfDocument&&(this._ready=!0)}))}}else await this._destroyScripting()}async dispatchWillSave(detail){var _this$_scripting4;return null===(_this$_scripting4=this._scripting)||void 0===_this$_scripting4?void 0:_this$_scripting4.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(detail){var _this$_scripting5;return null===(_this$_scripting5=this._scripting)||void 0===_this$_scripting5?void 0:_this$_scripting5.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(detail){var _this$_scripting6;return null===(_this$_scripting6=this._scripting)||void 0===_this$_scripting6?void 0:_this$_scripting6.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(detail){var _this$_scripting7;return null===(_this$_scripting7=this._scripting)||void 0===_this$_scripting7?void 0:_this$_scripting7.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){var _this$_destroyCapabil;return(null===(_this$_destroyCapabil=this._destroyCapability)||void 0===_this$_destroyCapabil?void 0:_this$_destroyCapabil.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,_pdfjsLib.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,_pdfjsLib.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,_pdfjsLib.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,_pdfjsLib.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(detail){const isInPresentationMode=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:id,siblings:siblings,command:command,value:value}=detail;if(!id){switch(command){case"clear":console.clear();break;case"error":console.error(value);break;case"layout":if(isInPresentationMode)return;const modes=(0,_ui_utils.apiPageLayoutToViewerModes)(value);this._pdfViewer.spreadMode=modes.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=value+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(value);break;case"zoom":if(isInPresentationMode)return;this._pdfViewer.currentScaleValue=value;break;case"SaveAs":this._eventBus.dispatch("save",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(isInPresentationMode)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(isInPresentationMode)return;this._pdfViewer.decreaseScale()}return}if(isInPresentationMode&&detail.focus)return;delete detail.id,delete detail.siblings;const ids=siblings?[id,...siblings]:[id];for(const elementId of ids){const element=document.getElementById(elementId);var _this$_pdfDocument;if(element)element.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:detail}));else null===(_this$_pdfDocument=this._pdfDocument)||void 0===_this$_pdfDocument||_this$_pdfDocument.annotationStorage.setValue(elementId,detail)}}async _dispatchPageOpen(pageNumber){let initialize=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const pdfDocument=this._pdfDocument,visitedPages=this._visitedPages;if(initialize&&(this._closeCapability=(0,_pdfjsLib.createPromiseCapability)()),!this._closeCapability)return;const pageView=this._pdfViewer.getPageView(pageNumber-1);if((null==pageView?void 0:pageView.renderingState)!==_ui_utils.RenderingStates.FINISHED)return void this._pageOpenPending.add(pageNumber);this._pageOpenPending.delete(pageNumber);const actionsPromise=(async()=>{var _pageView$pdfPage,_this$_scripting8;const actions=await(visitedPages.has(pageNumber)?null:null===(_pageView$pdfPage=pageView.pdfPage)||void 0===_pageView$pdfPage?void 0:_pageView$pdfPage.getJSActions());pdfDocument===this._pdfDocument&&await(null===(_this$_scripting8=this._scripting)||void 0===_this$_scripting8?void 0:_this$_scripting8.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:pageNumber,actions:actions}))})();visitedPages.set(pageNumber,actionsPromise)}async _dispatchPageClose(pageNumber){var _this$_scripting9;const pdfDocument=this._pdfDocument,visitedPages=this._visitedPages;if(!this._closeCapability)return;if(this._pageOpenPending.has(pageNumber))return;const actionsPromise=visitedPages.get(pageNumber);actionsPromise&&(visitedPages.set(pageNumber,null),await actionsPromise,pdfDocument===this._pdfDocument&&await(null===(_this$_scripting9=this._scripting)||void 0===_this$_scripting9?void 0:_this$_scripting9.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:pageNumber})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:docPropertiesLookup}=__w_pdfjs_require__(24);return docPropertiesLookup(this._pdfDocument)}_createScripting(){if(this._destroyCapability=(0,_pdfjsLib.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:GenericScripting}=__w_pdfjs_require__(24);return new GenericScripting(this._sandboxBundleSrc)}async _destroyScripting(){var _this$_destroyCapabil3,_this$_destroyCapabil2;if(!this._scripting)return this._pdfDocument=null,void(null===(_this$_destroyCapabil2=this._destroyCapability)||void 0===_this$_destroyCapabil2||_this$_destroyCapabil2.resolve());this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise((resolve=>{setTimeout(resolve,1e3)}))]).catch((reason=>{})),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch(ex){}for(const[name,listener]of this._internalEvents)this._eventBus._off(name,listener);this._internalEvents.clear();for(const[name,listener]of this._domEvents)window.removeEventListener(name,listener);this._domEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,delete this._mouseState.isDown,this._ready=!1,null===(_this$_destroyCapabil3=this._destroyCapability)||void 0===_this$_destroyCapabil3||_this$_destroyCapabil3.resolve()}}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.GenericScripting=void 0,exports.docPropertiesLookup=async function(pdfDocument){const baseUrl="".split("#")[0];let{info:info,metadata:metadata,contentDispositionFilename:contentDispositionFilename,contentLength:contentLength}=await pdfDocument.getMetadata();if(!contentLength){const{length:length}=await pdfDocument.getDownloadInfo();contentLength=length}return{...info,baseURL:baseUrl,filesize:contentLength,filename:contentDispositionFilename||(0,_pdfjsLib.getPdfFilenameFromUrl)(""),metadata:null==metadata?void 0:metadata.getRaw(),authors:null==metadata?void 0:metadata.get("dc:creator"),numPages:pdfDocument.numPages,URL:""}};var _pdfjsLib=__w_pdfjs_require__(3);exports.GenericScripting=class{constructor(sandboxBundleSrc){this._ready=(0,_pdfjsLib.loadScript)(sandboxBundleSrc,!0).then((()=>window.pdfjsSandbox.QuickJSSandbox()))}async createSandbox(data){(await this._ready).create(data)}async dispatchEventInSandbox(event){const sandbox=await this._ready;setTimeout((()=>sandbox.dispatchEvent(event)),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__w_pdfjs_require__),module.exports}var __webpack_exports__={};return(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return _annotation_layer_builder.AnnotationLayerBuilder}}),Object.defineProperty(exports,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultAnnotationLayerFactory}}),Object.defineProperty(exports,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultStructTreeLayerFactory}}),Object.defineProperty(exports,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultTextLayerFactory}}),Object.defineProperty(exports,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return _default_factory.DefaultXfaLayerFactory}}),Object.defineProperty(exports,"DownloadManager",{enumerable:!0,get:function(){return _download_manager.DownloadManager}}),Object.defineProperty(exports,"EventBus",{enumerable:!0,get:function(){return _event_utils.EventBus}}),Object.defineProperty(exports,"GenericL10n",{enumerable:!0,get:function(){return _genericl10n.GenericL10n}}),Object.defineProperty(exports,"LinkTarget",{enumerable:!0,get:function(){return _pdf_link_service.LinkTarget}}),Object.defineProperty(exports,"NullL10n",{enumerable:!0,get:function(){return _l10n_utils.NullL10n}}),Object.defineProperty(exports,"PDFFindController",{enumerable:!0,get:function(){return _pdf_find_controller.PDFFindController}}),Object.defineProperty(exports,"PDFHistory",{enumerable:!0,get:function(){return _pdf_history.PDFHistory}}),Object.defineProperty(exports,"PDFLinkService",{enumerable:!0,get:function(){return _pdf_link_service.PDFLinkService}}),Object.defineProperty(exports,"PDFPageView",{enumerable:!0,get:function(){return _pdf_page_view.PDFPageView}}),Object.defineProperty(exports,"PDFScriptingManager",{enumerable:!0,get:function(){return _pdf_scripting_manager.PDFScriptingManager}}),Object.defineProperty(exports,"PDFSinglePageViewer",{enumerable:!0,get:function(){return _pdf_viewer.PDFSinglePageViewer}}),Object.defineProperty(exports,"PDFViewer",{enumerable:!0,get:function(){return _pdf_viewer.PDFViewer}}),Object.defineProperty(exports,"ProgressBar",{enumerable:!0,get:function(){return _ui_utils.ProgressBar}}),Object.defineProperty(exports,"SimpleLinkService",{enumerable:!0,get:function(){return _pdf_link_service.SimpleLinkService}}),Object.defineProperty(exports,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return _struct_tree_layer_builder.StructTreeLayerBuilder}}),Object.defineProperty(exports,"TextLayerBuilder",{enumerable:!0,get:function(){return _text_layer_builder.TextLayerBuilder}}),Object.defineProperty(exports,"XfaLayerBuilder",{enumerable:!0,get:function(){return _xfa_layer_builder.XfaLayerBuilder}}),Object.defineProperty(exports,"parseQueryString",{enumerable:!0,get:function(){return _ui_utils.parseQueryString}}),Object.defineProperty(exports,"TextHighlighter",{enumerable:!0,get:function(){return _text_highlighter.TextHighlighter}});var _default_factory=__w_pdfjs_require__(1),_pdf_link_service=__w_pdfjs_require__(5),_ui_utils=__w_pdfjs_require__(6),_pdf_viewer=__w_pdfjs_require__(10),_annotation_layer_builder=__w_pdfjs_require__(2),_download_manager=__w_pdfjs_require__(16),_event_utils=__w_pdfjs_require__(17),_genericl10n=__w_pdfjs_require__(18),_l10n_utils=__w_pdfjs_require__(4),_pdf_find_controller=__w_pdfjs_require__(20),_pdf_history=__w_pdfjs_require__(22),_pdf_page_view=__w_pdfjs_require__(12),_pdf_scripting_manager=__w_pdfjs_require__(23),_struct_tree_layer_builder=__w_pdfjs_require__(7),_text_layer_builder=__w_pdfjs_require__(8),_xfa_layer_builder=__w_pdfjs_require__(9),_text_highlighter=__w_pdfjs_require__(15)})(),__webpack_exports__})()));

//# sourceMappingURL=pdf_viewer.min.js.map